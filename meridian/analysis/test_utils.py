# Copyright 2026 The Meridian Authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

"""Helper functions and constants for Analysis module unit tests.

These constants are meant to be used in the end-to-end-like unit tests. They
were generated by running the model in a colab. The model was initialized with
random data (using seed=0), using same settings as the test Colab notebook.
"""

from collections.abc import Mapping, Sequence
import math
from xml import etree as et

from meridian import constants as c
import numpy as np
import pandas as pd
import xarray as xr


__all__ = []


INC_OUTCOME_MEDIA_AND_RF_USE_PRIOR = np.array([[
    [548.893188, 326.533813, 284.272339, 1075.883911, 598.832031],
    [90.918877, 609.735291, 845.877014, 340.465729, 323.705688],
    [489.546600, 311.039856, 335.144104, 407.069061, 563.418945],
    [758.685303, 66.981506, 127.567032, 332.155823, 378.459808],
    [1162.885010, 1653.666138, 185.916504, 385.161469, 318.950195],
    [230.716278, 501.891907, 1329.348755, 390.126587, 513.997375],
    [802.442139, 294.107117, 184.242279, 223.680634, 346.315491],
    [647.422974, 732.891113, 239.857452, 269.309631, 576.260681],
    [1165.084473, 965.998596, 713.800781, 661.573547, 165.250824],
    [402.497681, 139.770721, 632.357300, 852.208435, 354.651520],
]])
INC_OUTCOME_MEDIA_AND_RF_USE_POSTERIOR = np.array([
    [
        [202.376312, 583.532166, 55.011944, 845.309692, 219.261322],
        [201.303253, 599.677124, 54.998543, 853.618958, 216.788910],
        [201.682358, 596.483032, 54.963577, 852.083618, 217.220474],
        [201.695160, 597.017639, 55.031662, 849.157104, 211.501160],
        [201.224335, 593.724182, 55.060581, 854.193970, 211.361176],
        [199.214844, 604.617188, 54.907967, 862.339844, 222.584717],
        [202.001923, 581.001831, 54.899872, 864.289429, 220.438263],
        [202.330322, 582.729126, 54.834316, 853.669678, 219.577087],
        [201.768860, 579.852478, 54.841202, 850.181763, 216.847580],
        [201.698853, 584.400574, 54.879089, 850.460815, 218.799530],
    ],
    [
        [1477.513184, 96.881302, 235.746231, 299.273010, 134.824142],
        [1478.352173, 96.853592, 236.733582, 298.367676, 134.868759],
        [1476.522217, 96.797234, 238.604218, 297.437439, 134.287537],
        [1482.664551, 96.934227, 236.735519, 296.525391, 135.330444],
        [1494.072266, 96.040901, 236.161697, 294.539307, 136.387268],
        [1476.192261, 96.578735, 236.859558, 293.587158, 136.438782],
        [1504.218262, 96.727730, 239.623016, 291.359558, 135.671143],
        [1503.318604, 96.631813, 241.489532, 294.137634, 135.575409],
        [1531.828125, 96.976959, 238.988373, 296.556274, 135.034424],
        [1522.901367, 97.049255, 237.484329, 296.713409, 135.287735],
    ],
])
INC_OUTCOME_MEDIA_AND_RF_NEW_PARAMS = np.array([
    [
        [31.090157, 98.810410, 9.341570, 184.265381, 43.707542],
        [30.901371, 101.584709, 9.312302, 187.082047, 43.216816],
        [30.956142, 101.101532, 9.305799, 186.808411, 43.297394],
        [30.948626, 101.404945, 9.313512, 185.709091, 42.133488],
        [30.868448, 100.775734, 9.319215, 187.198135, 42.112926],
        [30.584354, 102.512863, 9.298801, 188.988235, 44.331055],
        [31.021759, 98.497543, 9.287824, 189.366516, 43.881771],
        [31.068136, 99.472374, 9.258528, 187.252136, 43.755486],
        [30.985371, 98.950348, 9.270968, 186.497711, 43.205894],
        [30.986458, 99.842903, 9.301170, 186.884338, 43.594501],
    ],
    [
        [243.015106, 17.743502, 36.623119, 46.660347, 24.836292],
        [243.237259, 17.741508, 36.794975, 46.520138, 24.843903],
        [242.832520, 17.733631, 37.076889, 46.378368, 24.747290],
        [243.594513, 17.740734, 36.808472, 46.295925, 24.915998],
        [245.420624, 17.619848, 36.790062, 45.969891, 25.058943],
        [242.604477, 17.718853, 36.909718, 45.842926, 25.039408],
        [246.897232, 17.741852, 37.331139, 45.470520, 24.897196],
        [246.762466, 17.728558, 37.607410, 45.900612, 24.858408],
        [251.313187, 17.774628, 37.105270, 46.216362, 24.770884],
        [249.926163, 17.790749, 36.857883, 46.192314, 24.817869],
    ],
])
INC_OUTCOME_MEDIA_ONLY_NEW_PARAMS = np.array([
    [
        [70.79386, 887.3538, 206.95084],
        [12.432843, 1498.6337, 13.650631],
        [210.13004, 1249.0194, 136.05183],
        [11.8573265, 1226.2638, 53.150593],
        [14.463062, 711.3038, 29.058144],
        [436.8775, 534.6654, 52.619774],
        [120.41998, 1005.5066, 44.285625],
        [103.88259, 1239.4484, 162.9408],
        [95.22613, 1220.5891, 61.506477],
        [130.00635, 436.42526, 20.972694],
    ],
    [
        [16.943043, 298.15854, 16.290949],
        [16.942688, 298.15637, 16.291037],
        [16.942997, 298.16455, 16.291815],
        [16.943108, 298.16544, 16.292109],
        [16.94289, 298.15503, 16.292725],
        [16.941252, 298.1506, 16.291363],
        [16.943195, 298.2188, 16.293066],
        [16.931208, 298.4427, 16.305803],
        [16.91723, 297.2865, 16.36602],
        [16.897263, 297.91827, 16.419819],
    ],
])
INC_OUTCOME_RF_ONLY_NEW_PARAMS = np.array([
    [
        [91.34808, 205.88185],
        [91.18264, 206.20079],
        [90.58128, 205.82399],
        [90.47417, 206.62871],
        [90.66333, 206.28223],
        [90.78027, 205.23451],
        [91.11021, 206.33527],
        [90.685616, 206.42043],
        [90.274414, 206.90916],
        [89.79674, 205.4469],
    ],
    [
        [265.14978, 91.20291],
        [272.6573, 74.412254],
        [255.82745, 81.017944],
        [305.80847, 73.81889],
        [332.42578, 76.14858],
        [327.3277, 71.36236],
        [342.1096, 69.68611],
        [383.22217, 65.759766],
        [382.83713, 68.23784],
        [493.76462, 66.86809],
    ],
])
INC_OUTCOME_MEDIA_ONLY_USE_PRIOR = np.array([[
    [551.34, 1071.77, 600.61],
    [416.56, 220.16, 302.47],
    [328.12, 191.68, 108.85],
    [858.76, 480.41, 163.72],
    [156.49, 216.55, 871.51],
    [2208.06, 752.48, 60.76],
    [212.20, 85.28, 20.00],
    [160.69, 642.43, 651.54],
    [1335.38, 513.54, 181.51],
    [147.56, 426.27, 354.36],
]])
INC_OUTCOME_MEDIA_ONLY_USE_POSTERIOR = np.array([
    [
        [341.47, 4323.64, 1198.80],
        [70.05, 7476.11, 69.56],
        [1124.28, 6274.36, 693.93],
        [60.03, 5857.76, 263.23],
        [77.94, 3465.37, 143.75],
        [2336.68, 2529.21, 277.47],
        [625.78, 5145.63, 268.51],
        [592.20, 6010.15, 1035.03],
        [503.91, 6103.16, 358.96],
        [833.23, 1976.09, 124.21],
    ],
    [
        [87.94, 1695.98, 99.80],
        [87.93, 1695.97, 99.80],
        [87.94, 1696.01, 99.80],
        [87.94, 1696.01, 99.81],
        [87.94, 1695.97, 99.81],
        [87.93, 1695.96, 99.80],
        [87.93, 1696.37, 99.81],
        [87.89, 1697.92, 99.89],
        [87.84, 1692.52, 100.31],
        [87.72, 1696.20, 100.65],
    ],
])
INC_OUTCOME_RF_ONLY_USE_PRIOR = np.array([[
    [646.24, 318.49],
    [441.57, 256.74],
    [1331.16, 97.92],
    [168.89, 601.37],
    [299.61, 297.77],
    [1382.17, 487.59],
    [318.69, 159.89],
    [812.50, 1734.59],
    [257.95, 871.77],
    [162.43, 675.57],
]])
INC_OUTCOME_RF_ONLY_USE_POSTERIOR = np.array([
    [
        [386.06, 1037.53],
        [385.36, 1039.23],
        [382.93, 1037.09],
        [382.42, 1041.15],
        [383.14, 1039.56],
        [383.37, 1034.98],
        [384.68, 1039.13],
        [382.77, 1040.12],
        [381.06, 1042.39],
        [379.17, 1035.06],
    ],
    [
        [1181.46, 353.52],
        [1193.12, 340.00],
        [1096.41, 341.53],
        [1329.99, 347.21],
        [1429.17, 333.79],
        [1425.08, 329.34],
        [1497.22, 306.80],
        [1625.06, 304.85],
        [1622.44, 305.77],
        [2081.52, 317.14],
    ],
])
INC_OUTCOME_NON_MEDIA_USE_PRIOR = np.array([[
    [
        5.489e02,
        3.265e02,
        2.843e02,
        1.076e03,
        5.988e02,
        3.485e05,
        1.119e04,
        6.263e07,
        3.290e03,
        8.161e10,
        -7.082e05,
        -9.829e04,
        2.489e05,
        -3.543e05,
    ],
    [
        9.092e01,
        6.097e02,
        8.459e02,
        3.405e02,
        3.237e02,
        2.401e06,
        1.318e05,
        6.626e05,
        1.724e04,
        4.627e06,
        -7.168e04,
        1.638e05,
        1.182e05,
        -3.964e04,
    ],
    [
        4.895e02,
        3.110e02,
        3.351e02,
        4.071e02,
        5.634e02,
        3.344e05,
        1.256e07,
        1.026e06,
        6.831e04,
        2.069e06,
        -1.562e05,
        -7.532e05,
        6.306e04,
        -6.477e04,
    ],
    [
        7.587e02,
        6.698e01,
        1.276e02,
        3.322e02,
        3.785e02,
        1.717e05,
        2.012e05,
        1.497e04,
        2.004e06,
        1.394e07,
        -6.290e04,
        -5.317e05,
        -7.469e04,
        5.424e05,
    ],
    [
        1.163e03,
        1.654e03,
        1.859e02,
        3.852e02,
        3.190e02,
        6.813e06,
        1.886e06,
        1.391e07,
        4.992e04,
        1.173e07,
        -1.444e05,
        5.715e05,
        1.634e05,
        -1.396e05,
    ],
    [
        2.307e02,
        5.019e02,
        1.329e03,
        3.901e02,
        5.140e02,
        5.773e05,
        8.054e04,
        6.429e07,
        1.837e06,
        5.812e06,
        1.258e05,
        -2.397e05,
        8.271e04,
        1.189e05,
    ],
    [
        8.024e02,
        2.941e02,
        1.842e02,
        2.237e02,
        3.463e02,
        5.605e06,
        1.863e05,
        4.082e06,
        6.236e05,
        8.159e04,
        3.924e05,
        -3.293e05,
        1.156e05,
        -1.996e05,
    ],
    [
        6.474e02,
        7.329e02,
        2.399e02,
        2.693e02,
        5.763e02,
        1.318e05,
        4.735e03,
        3.395e06,
        8.596e03,
        7.852e05,
        -9.526e03,
        -2.481e05,
        -4.968e04,
        -1.694e05,
    ],
    [
        1.165e03,
        9.660e02,
        7.138e02,
        6.616e02,
        1.653e02,
        6.375e06,
        1.392e04,
        2.707e05,
        6.963e05,
        5.928e07,
        3.115e05,
        4.500e05,
        1.112e05,
        3.036e05,
    ],
    [
        4.025e02,
        1.398e02,
        6.324e02,
        8.522e02,
        3.547e02,
        1.746e04,
        5.356e07,
        8.680e04,
        5.430e05,
        3.047e04,
        1.776e05,
        1.453e05,
        -4.541e04,
        2.340e05,
    ],
]])
INC_OUTCOME_NON_MEDIA_USE_POSTERIOR = np.array([
    [
        [
            2.0238e02,
            5.8353e02,
            5.5012e01,
            8.4531e02,
            2.1926e02,
            3.8210e03,
            1.0265e04,
            1.4751e04,
            6.0696e03,
            1.5890e03,
            6.6859e04,
            6.4563e04,
            1.9831e04,
            1.4883e04,
        ],
        [
            2.0130e02,
            5.9968e02,
            5.5000e01,
            8.5362e02,
            2.1679e02,
            3.8963e03,
            9.4170e03,
            1.2675e04,
            6.0058e03,
            2.4013e03,
            6.5075e04,
            6.4246e04,
            1.8847e04,
            1.4510e04,
        ],
        [
            2.0168e02,
            5.9648e02,
            5.4964e01,
            8.5208e02,
            2.1722e02,
            3.8931e03,
            9.0868e03,
            1.2759e04,
            5.9805e03,
            2.1549e03,
            6.5114e04,
            6.3719e04,
            1.8948e04,
            1.5379e04,
        ],
        [
            2.0170e02,
            5.9702e02,
            5.5032e01,
            8.4916e02,
            2.1150e02,
            4.0122e03,
            8.3681e03,
            1.2248e04,
            5.9804e03,
            2.9416e03,
            6.1540e04,
            6.0932e04,
            1.8363e04,
            1.4011e04,
        ],
        [
            2.0122e02,
            5.9372e02,
            5.5061e01,
            8.5419e02,
            2.1136e02,
            4.0010e03,
            7.8779e03,
            1.2369e04,
            5.9740e03,
            2.6948e03,
            6.2751e04,
            6.1664e04,
            1.8033e04,
            1.5206e04,
        ],
        [
            1.9921e02,
            6.0462e02,
            5.4908e01,
            8.6234e02,
            2.2258e02,
            3.9312e03,
            8.0107e03,
            1.2636e04,
            5.9829e03,
            1.6394e03,
            6.3985e04,
            6.1798e04,
            1.7591e04,
            1.2377e04,
        ],
        [
            2.0200e02,
            5.8100e02,
            5.4900e01,
            8.6429e02,
            2.2044e02,
            3.9426e03,
            8.3308e03,
            1.2752e04,
            5.9539e03,
            1.2265e03,
            6.1995e04,
            5.9816e04,
            1.7334e04,
            1.2653e04,
        ],
        [
            2.0233e02,
            5.8273e02,
            5.4834e01,
            8.5367e02,
            2.1958e02,
            4.3478e03,
            7.4640e03,
            1.3675e04,
            5.9324e03,
            1.3061e03,
            5.5634e04,
            5.9478e04,
            1.7214e04,
            1.3773e04,
        ],
        [
            2.0177e02,
            5.7985e02,
            5.4841e01,
            8.5018e02,
            2.1685e02,
            4.2241e03,
            7.5246e03,
            1.3767e04,
            5.8943e03,
            1.2255e03,
            5.6578e04,
            5.9328e04,
            1.7582e04,
            1.4013e04,
        ],
        [
            2.0170e02,
            5.8440e02,
            5.4879e01,
            8.5046e02,
            2.1880e02,
            4.3914e03,
            6.7852e03,
            1.3397e04,
            5.9116e03,
            8.7753e02,
            5.8063e04,
            5.8998e04,
            1.8104e04,
            1.1654e04,
        ],
    ],
    [
        [
            1.4775e03,
            9.6881e01,
            2.3575e02,
            2.9927e02,
            1.3482e02,
            2.0643e03,
            2.7670e03,
            1.0923e04,
            3.4988e03,
            1.0965e04,
            6.1439e04,
            1.4810e05,
            -3.7854e04,
            7.2325e04,
        ],
        [
            1.4784e03,
            9.6854e01,
            2.3673e02,
            2.9837e02,
            1.3487e02,
            2.0645e03,
            2.7700e03,
            1.1064e04,
            3.5005e03,
            1.0776e04,
            6.2410e04,
            1.4756e05,
            -3.7918e04,
            7.1210e04,
        ],
        [
            1.4765e03,
            9.6797e01,
            2.3860e02,
            2.9744e02,
            1.3429e02,
            2.0633e03,
            2.7712e03,
            7.2391e03,
            3.5079e03,
            1.0438e04,
            5.9793e04,
            1.4660e05,
            -3.7716e04,
            6.8293e04,
        ],
        [
            1.4827e03,
            9.6934e01,
            2.3674e02,
            2.9653e02,
            1.3533e02,
            2.0593e03,
            2.7893e03,
            7.2933e03,
            3.5169e03,
            1.0522e04,
            5.8467e04,
            1.4639e05,
            -3.7516e04,
            6.2768e04,
        ],
        [
            1.4941e03,
            9.6041e01,
            2.3616e02,
            2.9454e02,
            1.3639e02,
            2.0606e03,
            2.7868e03,
            3.2974e03,
            3.5292e03,
            9.7980e03,
            5.2905e04,
            1.4145e05,
            -3.7059e04,
            5.4307e04,
        ],
        [
            1.4762e03,
            9.6579e01,
            2.3686e02,
            2.9359e02,
            1.3644e02,
            2.0574e03,
            2.7701e03,
            2.7005e03,
            3.5187e03,
            9.5369e03,
            5.3470e04,
            1.4859e05,
            -3.7130e04,
            5.1484e04,
        ],
        [
            1.5042e03,
            9.6728e01,
            2.3962e02,
            2.9136e02,
            1.3567e02,
            2.0608e03,
            2.7665e03,
            2.3629e03,
            3.5399e03,
            9.1012e03,
            5.3590e04,
            1.4588e05,
            -3.7448e04,
            4.5941e04,
        ],
        [
            1.5033e03,
            9.6632e01,
            2.4149e02,
            2.9414e02,
            1.3558e02,
            2.0623e03,
            2.7513e03,
            2.2571e03,
            3.5361e03,
            8.8956e03,
            5.2362e04,
            1.5046e05,
            -3.7283e04,
            4.2394e04,
        ],
        [
            1.5318e03,
            9.6977e01,
            2.3899e02,
            2.9656e02,
            1.3503e02,
            2.0618e03,
            2.7479e03,
            2.0818e03,
            3.5628e03,
            8.6564e03,
            5.1337e04,
            1.5559e05,
            -3.7065e04,
            4.4249e04,
        ],
        [
            1.5229e03,
            9.7049e01,
            2.3748e02,
            2.9671e02,
            1.3529e02,
            2.0608e03,
            2.7514e03,
            1.7469e03,
            3.5548e03,
            8.8235e03,
            5.1495e04,
            1.5587e05,
            -3.7424e04,
            4.3794e04,
        ],
    ],
])
INC_OUTCOME_NON_PAID_USE_POSTERIOR = np.array([
    [
        [
            2.024e02,
            5.835e02,
            5.501e01,
            8.453e02,
            2.193e02,
            3.821e03,
            1.027e04,
            1.475e04,
            6.070e03,
            1.589e03,
            6.686e04,
            6.456e04,
            1.983e04,
            1.488e04,
        ],
        [
            2.013e02,
            5.997e02,
            5.500e01,
            8.536e02,
            2.168e02,
            3.896e03,
            9.417e03,
            1.268e04,
            6.006e03,
            2.401e03,
            6.508e04,
            6.425e04,
            1.885e04,
            1.451e04,
        ],
        [
            2.017e02,
            5.965e02,
            5.496e01,
            8.521e02,
            2.172e02,
            3.893e03,
            9.087e03,
            1.276e04,
            5.980e03,
            2.155e03,
            6.511e04,
            6.372e04,
            1.895e04,
            1.538e04,
        ],
        [
            2.017e02,
            5.970e02,
            5.503e01,
            8.492e02,
            2.115e02,
            4.012e03,
            8.368e03,
            1.225e04,
            5.980e03,
            2.942e03,
            6.154e04,
            6.093e04,
            1.836e04,
            1.401e04,
        ],
        [
            2.012e02,
            5.937e02,
            5.506e01,
            8.542e02,
            2.114e02,
            4.001e03,
            7.878e03,
            1.237e04,
            5.974e03,
            2.695e03,
            6.275e04,
            6.166e04,
            1.803e04,
            1.521e04,
        ],
        [
            1.992e02,
            6.046e02,
            5.491e01,
            8.623e02,
            2.226e02,
            3.931e03,
            8.011e03,
            1.264e04,
            5.983e03,
            1.639e03,
            6.399e04,
            6.180e04,
            1.759e04,
            1.238e04,
        ],
        [
            2.020e02,
            5.810e02,
            5.490e01,
            8.643e02,
            2.204e02,
            3.943e03,
            8.331e03,
            1.275e04,
            5.954e03,
            1.227e03,
            6.200e04,
            5.982e04,
            1.733e04,
            1.265e04,
        ],
        [
            2.023e02,
            5.827e02,
            5.483e01,
            8.537e02,
            2.196e02,
            4.348e03,
            7.464e03,
            1.367e04,
            5.932e03,
            1.306e03,
            5.563e04,
            5.948e04,
            1.721e04,
            1.377e04,
        ],
        [
            2.018e02,
            5.799e02,
            5.484e01,
            8.502e02,
            2.168e02,
            4.224e03,
            7.525e03,
            1.377e04,
            5.894e03,
            1.225e03,
            5.658e04,
            5.933e04,
            1.758e04,
            1.401e04,
        ],
        [
            2.017e02,
            5.844e02,
            5.488e01,
            8.505e02,
            2.188e02,
            4.391e03,
            6.785e03,
            1.340e04,
            5.912e03,
            8.775e02,
            5.806e04,
            5.900e04,
            1.810e04,
            1.165e04,
        ],
    ],
    [
        [
            1.478e03,
            9.688e01,
            2.357e02,
            2.993e02,
            1.348e02,
            2.064e03,
            2.767e03,
            1.092e04,
            3.499e03,
            1.097e04,
            6.144e04,
            1.481e05,
            -3.785e04,
            7.233e04,
        ],
        [
            1.478e03,
            9.685e01,
            2.367e02,
            2.984e02,
            1.349e02,
            2.065e03,
            2.770e03,
            1.106e04,
            3.500e03,
            1.078e04,
            6.241e04,
            1.476e05,
            -3.792e04,
            7.121e04,
        ],
        [
            1.477e03,
            9.680e01,
            2.386e02,
            2.974e02,
            1.343e02,
            2.063e03,
            2.771e03,
            7.239e03,
            3.508e03,
            1.044e04,
            5.979e04,
            1.466e05,
            -3.772e04,
            6.829e04,
        ],
        [
            1.483e03,
            9.693e01,
            2.367e02,
            2.965e02,
            1.353e02,
            2.059e03,
            2.789e03,
            7.293e03,
            3.517e03,
            1.052e04,
            5.847e04,
            1.464e05,
            -3.752e04,
            6.277e04,
        ],
        [
            1.494e03,
            9.604e01,
            2.362e02,
            2.945e02,
            1.364e02,
            2.061e03,
            2.787e03,
            3.297e03,
            3.529e03,
            9.798e03,
            5.291e04,
            1.414e05,
            -3.706e04,
            5.431e04,
        ],
        [
            1.476e03,
            9.658e01,
            2.369e02,
            2.936e02,
            1.364e02,
            2.057e03,
            2.770e03,
            2.700e03,
            3.519e03,
            9.537e03,
            5.347e04,
            1.486e05,
            -3.713e04,
            5.148e04,
        ],
        [
            1.504e03,
            9.673e01,
            2.396e02,
            2.914e02,
            1.357e02,
            2.061e03,
            2.766e03,
            2.363e03,
            3.540e03,
            9.101e03,
            5.359e04,
            1.459e05,
            -3.745e04,
            4.594e04,
        ],
        [
            1.503e03,
            9.663e01,
            2.415e02,
            2.941e02,
            1.356e02,
            2.062e03,
            2.751e03,
            2.257e03,
            3.536e03,
            8.896e03,
            5.236e04,
            1.505e05,
            -3.728e04,
            4.239e04,
        ],
        [
            1.532e03,
            9.698e01,
            2.390e02,
            2.966e02,
            1.350e02,
            2.062e03,
            2.748e03,
            2.082e03,
            3.563e03,
            8.656e03,
            5.134e04,
            1.556e05,
            -3.706e04,
            4.425e04,
        ],
        [
            1.523e03,
            9.705e01,
            2.375e02,
            2.967e02,
            1.353e02,
            2.061e03,
            2.751e03,
            1.747e03,
            3.555e03,
            8.823e03,
            5.150e04,
            1.559e05,
            -3.742e04,
            4.379e04,
        ],
    ],
])
INC_OUTCOME_NON_PAID_USE_PRIOR = np.array([[
    [
        5.489e02,
        3.265e02,
        2.843e02,
        1.076e03,
        5.988e02,
        3.485e05,
        1.119e04,
        6.263e07,
        3.290e03,
        8.161e10,
        -7.082e05,
        -9.829e04,
        2.489e05,
        -3.543e05,
    ],
    [
        9.092e01,
        6.097e02,
        8.459e02,
        3.405e02,
        3.237e02,
        2.401e06,
        1.318e05,
        6.626e05,
        1.724e04,
        4.627e06,
        -7.168e04,
        1.638e05,
        1.182e05,
        -3.964e04,
    ],
    [
        4.895e02,
        3.110e02,
        3.351e02,
        4.071e02,
        5.634e02,
        3.344e05,
        1.256e07,
        1.026e06,
        6.831e04,
        2.069e06,
        -1.562e05,
        -7.532e05,
        6.306e04,
        -6.477e04,
    ],
    [
        7.587e02,
        6.698e01,
        1.276e02,
        3.322e02,
        3.785e02,
        1.717e05,
        2.012e05,
        1.497e04,
        2.004e06,
        1.394e07,
        -6.290e04,
        -5.317e05,
        -7.469e04,
        5.424e05,
    ],
    [
        1.163e03,
        1.654e03,
        1.859e02,
        3.852e02,
        3.190e02,
        6.813e06,
        1.886e06,
        1.391e07,
        4.992e04,
        1.173e07,
        -1.444e05,
        5.715e05,
        1.634e05,
        -1.396e05,
    ],
    [
        2.307e02,
        5.019e02,
        1.329e03,
        3.901e02,
        5.140e02,
        5.773e05,
        8.054e04,
        6.429e07,
        1.837e06,
        5.812e06,
        1.258e05,
        -2.397e05,
        8.271e04,
        1.189e05,
    ],
    [
        8.024e02,
        2.941e02,
        1.842e02,
        2.237e02,
        3.463e02,
        5.605e06,
        1.863e05,
        4.082e06,
        6.236e05,
        8.159e04,
        3.924e05,
        -3.293e05,
        1.156e05,
        -1.996e05,
    ],
    [
        6.474e02,
        7.329e02,
        2.399e02,
        2.693e02,
        5.763e02,
        1.318e05,
        4.735e03,
        3.395e06,
        8.596e03,
        7.852e05,
        -9.526e03,
        -2.481e05,
        -4.968e04,
        -1.694e05,
    ],
    [
        1.165e03,
        9.660e02,
        7.138e02,
        6.616e02,
        1.653e02,
        6.375e06,
        1.392e04,
        2.707e05,
        6.963e05,
        5.928e07,
        3.115e05,
        4.500e05,
        1.112e05,
        3.036e05,
    ],
    [
        4.025e02,
        1.398e02,
        6.324e02,
        8.522e02,
        3.547e02,
        1.746e04,
        5.356e07,
        8.680e04,
        5.430e05,
        3.047e04,
        1.776e05,
        1.453e05,
        -4.541e04,
        2.340e05,
    ],
]])
INC_OUTCOME_NON_MEDIA_MIN = np.array(
    [
        [
            [
                2.0238e02,
                5.8353e02,
                5.5012e01,
                8.4531e02,
                2.1926e02,
                3.8210e03,
                1.0265e04,
                1.4751e04,
                6.0696e03,
                1.5890e03,
                7.7283e04,
                7.4838e04,
                2.4621e04,
                1.7389e04,
            ],
            [
                2.0130e02,
                5.9968e02,
                5.4999e01,
                8.5362e02,
                2.1679e02,
                3.8963e03,
                9.4170e03,
                1.2675e04,
                6.0058e03,
                2.4013e03,
                7.5221e04,
                7.4468e04,
                2.3402e04,
                1.6955e04,
            ],
            [
                2.0168e02,
                5.9648e02,
                5.4964e01,
                8.5208e02,
                2.1722e02,
                3.8931e03,
                9.0868e03,
                1.2759e04,
                5.9805e03,
                2.1549e03,
                7.5266e04,
                7.3859e04,
                2.3527e04,
                1.7971e04,
            ],
            [
                2.0170e02,
                5.9702e02,
                5.5032e01,
                8.4916e02,
                2.1150e02,
                4.0122e03,
                8.3681e03,
                1.2248e04,
                5.9804e03,
                2.9416e03,
                7.1129e04,
                7.0646e04,
                2.2802e04,
                1.6371e04,
            ],
            [
                2.0122e02,
                5.9372e02,
                5.5061e01,
                8.5419e02,
                2.1136e02,
                4.0010e03,
                7.8779e03,
                1.2369e04,
                5.9740e03,
                2.6948e03,
                7.2530e04,
                7.1490e04,
                2.2393e04,
                1.7770e04,
            ],
            [
                1.9921e02,
                6.0462e02,
                5.4908e01,
                8.6234e02,
                2.2258e02,
                3.9312e03,
                8.0107e03,
                1.2636e04,
                5.9829e03,
                1.6394e03,
                7.3958e04,
                7.1653e04,
                2.1845e04,
                1.4461e04,
            ],
            [
                2.0200e02,
                5.8100e02,
                5.4900e01,
                8.6429e02,
                2.2044e02,
                3.9426e03,
                8.3308e03,
                1.2752e04,
                5.9539e03,
                1.2265e03,
                7.1656e04,
                6.9366e04,
                2.1525e04,
                1.4782e04,
            ],
            [
                2.0233e02,
                5.8273e02,
                5.4834e01,
                8.5367e02,
                2.1958e02,
                4.3478e03,
                7.4640e03,
                1.3675e04,
                5.9324e03,
                1.3061e03,
                6.4298e04,
                6.8988e04,
                2.1376e04,
                1.6092e04,
            ],
            [
                2.0177e02,
                5.7985e02,
                5.4841e01,
                8.5018e02,
                2.1685e02,
                4.2241e03,
                7.5246e03,
                1.3767e04,
                5.8943e03,
                1.2255e03,
                6.5390e04,
                6.8816e04,
                2.1832e04,
                1.6372e04,
            ],
            [
                2.0170e02,
                5.8440e02,
                5.4879e01,
                8.5046e02,
                2.1880e02,
                4.3914e03,
                6.7852e03,
                1.3397e04,
                5.9116e03,
                8.7753e02,
                6.7108e04,
                6.8432e04,
                2.2479e04,
                1.3613e04,
            ],
        ],
        [
            [
                1.4775e03,
                9.6881e01,
                2.3575e02,
                2.9927e02,
                1.3482e02,
                2.0643e03,
                2.7670e03,
                1.0923e04,
                3.4988e03,
                1.0965e04,
                7.1034e04,
                1.7101e05,
                -4.6900e04,
                8.4539e04,
            ],
            [
                1.4784e03,
                9.6854e01,
                2.3673e02,
                2.9837e02,
                1.3487e02,
                2.0645e03,
                2.7700e03,
                1.1064e04,
                3.5005e03,
                1.0776e04,
                7.2157e04,
                1.7039e05,
                -4.6980e04,
                8.3234e04,
            ],
            [
                1.4765e03,
                9.6797e01,
                2.3860e02,
                2.9744e02,
                1.3429e02,
                2.0633e03,
                2.7712e03,
                7.2391e03,
                3.5079e03,
                1.0438e04,
                6.9129e04,
                1.6927e05,
                -4.6730e04,
                7.9833e04,
            ],
            [
                1.4827e03,
                9.6934e01,
                2.3674e02,
                2.9653e02,
                1.3533e02,
                2.0593e03,
                2.7893e03,
                7.2933e03,
                3.5169e03,
                1.0522e04,
                6.7597e04,
                1.6903e05,
                -4.6481e04,
                7.3381e04,
            ],
            [
                1.4941e03,
                9.6041e01,
                2.3616e02,
                2.9454e02,
                1.3639e02,
                2.0606e03,
                2.7868e03,
                3.2974e03,
                3.5292e03,
                9.7980e03,
                6.1161e04,
                1.6332e05,
                -4.5915e04,
                6.3502e04,
            ],
            [
                1.4762e03,
                9.6579e01,
                2.3686e02,
                2.9359e02,
                1.3644e02,
                2.0574e03,
                2.7701e03,
                2.7005e03,
                3.5187e03,
                9.5369e03,
                6.1815e04,
                1.7157e05,
                -4.6003e04,
                6.0183e04,
            ],
            [
                1.5042e03,
                9.6728e01,
                2.3962e02,
                2.9136e02,
                1.3567e02,
                2.0608e03,
                2.7665e03,
                2.3629e03,
                3.5399e03,
                9.1012e03,
                6.1951e04,
                1.6845e05,
                -4.6398e04,
                5.3698e04,
            ],
            [
                1.5033e03,
                9.6632e01,
                2.4149e02,
                2.9414e02,
                1.3558e02,
                2.0623e03,
                2.7513e03,
                2.2571e03,
                3.5361e03,
                8.8956e03,
                6.0530e04,
                1.7373e05,
                -4.6193e04,
                4.9564e04,
            ],
            [
                1.5318e03,
                9.6977e01,
                2.3899e02,
                2.9656e02,
                1.3503e02,
                2.0618e03,
                2.7479e03,
                2.0818e03,
                3.5628e03,
                8.6564e03,
                5.9346e04,
                1.7966e05,
                -4.5922e04,
                5.1728e04,
            ],
            [
                1.5229e03,
                9.7049e01,
                2.3748e02,
                2.9671e02,
                1.3529e02,
                2.0608e03,
                2.7514e03,
                1.7469e03,
                3.5548e03,
                8.8235e03,
                5.9531e04,
                1.7998e05,
                -4.6368e04,
                5.1195e04,
            ],
        ],
    ],
)
INC_OUTCOME_NON_MEDIA_MAX = np.array([
    [
        [
            2.0238e02,
            5.8353e02,
            5.5012e01,
            8.4531e02,
            2.1926e02,
            3.8210e03,
            1.0265e04,
            1.4751e04,
            6.0696e03,
            1.5890e03,
            -4.8949e04,
            -5.5811e04,
            -1.3314e04,
            -1.1825e04,
        ],
        [
            2.0130e02,
            5.9968e02,
            5.5000e01,
            8.5362e02,
            2.1679e02,
            3.8963e03,
            9.4170e03,
            1.2675e04,
            6.0058e03,
            2.4013e03,
            -4.7634e04,
            -5.5500e04,
            -1.2670e04,
            -1.1546e04,
        ],
        [
            2.0168e02,
            5.9648e02,
            5.4964e01,
            8.5208e02,
            2.1722e02,
            3.8931e03,
            9.0868e03,
            1.2759e04,
            5.9805e03,
            2.1549e03,
            -4.7662e04,
            -5.5073e04,
            -1.2735e04,
            -1.2247e04,
        ],
        [
            2.0170e02,
            5.9702e02,
            5.5032e01,
            8.4916e02,
            2.1150e02,
            4.0122e03,
            8.3681e03,
            1.2248e04,
            5.9804e03,
            2.9416e03,
            -4.4996e04,
            -5.2861e04,
            -1.2349e04,
            -1.1154e04,
        ],
        [
            2.0122e02,
            5.9372e02,
            5.5061e01,
            8.5419e02,
            2.1136e02,
            4.0010e03,
            7.8779e03,
            1.2369e04,
            5.9740e03,
            2.6948e03,
            -4.5885e04,
            -5.3446e04,
            -1.2131e04,
            -1.2116e04,
        ],
        [
            1.9921e02,
            6.0462e02,
            5.4908e01,
            8.6234e02,
            2.2258e02,
            3.9312e03,
            8.0107e03,
            1.2636e04,
            5.9829e03,
            1.6394e03,
            -4.6808e04,
            -5.3648e04,
            -1.1839e04,
            -9.8296e03,
        ],
        [
            2.0200e02,
            5.8100e02,
            5.4900e01,
            8.6429e02,
            2.2044e02,
            3.9426e03,
            8.3308e03,
            1.2752e04,
            5.9539e03,
            1.2265e03,
            -4.5329e04,
            -5.2066e04,
            -1.1668e04,
            -1.0049e04,
        ],
        [
            2.0233e02,
            5.8273e02,
            5.4834e01,
            8.5367e02,
            2.1958e02,
            4.3478e03,
            7.4640e03,
            1.3675e04,
            5.9324e03,
            1.3061e03,
            -4.0614e04,
            -5.1924e04,
            -1.1587e04,
            -1.0946e04,
        ],
        [
            2.0177e02,
            5.7985e02,
            5.4841e01,
            8.5018e02,
            2.1685e02,
            4.2241e03,
            7.5246e03,
            1.3767e04,
            5.8943e03,
            1.2255e03,
            -4.1315e04,
            -5.1817e04,
            -1.1829e04,
            -1.1132e04,
        ],
        [
            2.0170e02,
            5.8440e02,
            5.4879e01,
            8.5046e02,
            2.1880e02,
            4.3914e03,
            6.7852e03,
            1.3397e04,
            5.9116e03,
            8.7753e02,
            -4.2415e04,
            -5.1517e04,
            -1.2174e04,
            -9.2253e03,
        ],
    ],
    [
        [
            1.4775e03,
            9.6881e01,
            2.3575e02,
            2.9927e02,
            1.3482e02,
            2.0643e03,
            2.7670e03,
            1.0923e04,
            3.4988e03,
            1.0965e04,
            -4.5151e04,
            -1.2026e05,
            2.4742e04,
            -5.7859e04,
        ],
        [
            1.4784e03,
            9.6854e01,
            2.3673e02,
            2.9837e02,
            1.3487e02,
            2.0645e03,
            2.7700e03,
            1.1064e04,
            3.5005e03,
            1.0776e04,
            -4.5872e04,
            -1.1984e05,
            2.4784e04,
            -5.6960e04,
        ],
        [
            1.4765e03,
            9.6797e01,
            2.3860e02,
            2.9744e02,
            1.3429e02,
            2.0633e03,
            2.7712e03,
            7.2391e03,
            3.5079e03,
            1.0438e04,
            -4.3929e04,
            -1.1901e05,
            2.4652e04,
            -5.4715e04,
        ],
        [
            1.4827e03,
            9.6934e01,
            2.3674e02,
            2.9653e02,
            1.3533e02,
            2.0593e03,
            2.7893e03,
            7.2933e03,
            3.5169e03,
            1.0522e04,
            -4.2959e04,
            -1.1883e05,
            2.4519e04,
            -5.0357e04,
        ],
        [
            1.4941e03,
            9.6041e01,
            2.3616e02,
            2.9454e02,
            1.3639e02,
            2.0606e03,
            2.7868e03,
            3.2974e03,
            3.5292e03,
            9.7980e03,
            -3.8812e04,
            -1.1475e05,
            2.4220e04,
            -4.3710e04,
        ],
        [
            1.4762e03,
            9.6579e01,
            2.3686e02,
            2.9359e02,
            1.3644e02,
            2.0574e03,
            2.7701e03,
            2.7005e03,
            3.5187e03,
            9.5369e03,
            -3.9230e04,
            -1.2063e05,
            2.4265e04,
            -4.1238e04,
        ],
        [
            1.5042e03,
            9.6728e01,
            2.3962e02,
            2.9136e02,
            1.3567e02,
            2.0608e03,
            2.7665e03,
            2.3629e03,
            3.5399e03,
            9.1012e03,
            -3.9292e04,
            -1.1847e05,
            2.4477e04,
            -3.6742e04,
        ],
        [
            1.5033e03,
            9.6632e01,
            2.4149e02,
            2.9414e02,
            1.3558e02,
            2.0623e03,
            2.7513e03,
            2.2571e03,
            3.5361e03,
            8.8956e03,
            -3.8382e04,
            -1.2218e05,
            2.4368e04,
            -3.4033e04,
        ],
        [
            1.5318e03,
            9.6977e01,
            2.3899e02,
            2.9656e02,
            1.3503e02,
            2.0618e03,
            2.7479e03,
            2.0818e03,
            3.5628e03,
            8.6564e03,
            -3.7642e04,
            -1.2637e05,
            2.4223e04,
            -3.5474e04,
        ],
        [
            1.5229e03,
            9.7049e01,
            2.3748e02,
            2.9671e02,
            1.3529e02,
            2.0608e03,
            2.7514e03,
            1.7469e03,
            3.5548e03,
            8.8235e03,
            -3.7776e04,
            -1.2657e05,
            2.4460e04,
            -3.5100e04,
        ],
    ],
])
INC_OUTCOME_NON_MEDIA_MIX = np.array([
    [
        [
            2.0238e02,
            5.8353e02,
            5.5012e01,
            8.4531e02,
            2.1926e02,
            3.8210e03,
            1.0265e04,
            1.4751e04,
            6.0696e03,
            1.5890e03,
            7.7283e04,
            -5.5811e04,
            -1.3314e04,
            1.7389e04,
        ],
        [
            2.0130e02,
            5.9968e02,
            5.5000e01,
            8.5362e02,
            2.1679e02,
            3.8963e03,
            9.4170e03,
            1.2675e04,
            6.0058e03,
            2.4013e03,
            7.5221e04,
            -5.5500e04,
            -1.2670e04,
            1.6955e04,
        ],
        [
            2.0168e02,
            5.9648e02,
            5.4964e01,
            8.5208e02,
            2.1722e02,
            3.8931e03,
            9.0868e03,
            1.2759e04,
            5.9805e03,
            2.1549e03,
            7.5266e04,
            -5.5073e04,
            -1.2735e04,
            1.7971e04,
        ],
        [
            2.0170e02,
            5.9702e02,
            5.5032e01,
            8.4916e02,
            2.1150e02,
            4.0122e03,
            8.3681e03,
            1.2248e04,
            5.9804e03,
            2.9416e03,
            7.1129e04,
            -5.2861e04,
            -1.2349e04,
            1.6371e04,
        ],
        [
            2.0122e02,
            5.9372e02,
            5.5061e01,
            8.5419e02,
            2.1136e02,
            4.0010e03,
            7.8779e03,
            1.2369e04,
            5.9740e03,
            2.6948e03,
            7.2530e04,
            -5.3446e04,
            -1.2131e04,
            1.7770e04,
        ],
        [
            1.9921e02,
            6.0462e02,
            5.4908e01,
            8.6234e02,
            2.2258e02,
            3.9312e03,
            8.0107e03,
            1.2636e04,
            5.9829e03,
            1.6394e03,
            7.3958e04,
            -5.3648e04,
            -1.1839e04,
            1.4461e04,
        ],
        [
            2.0200e02,
            5.8100e02,
            5.4900e01,
            8.6429e02,
            2.2044e02,
            3.9426e03,
            8.3308e03,
            1.2752e04,
            5.9539e03,
            1.2265e03,
            7.1656e04,
            -5.2066e04,
            -1.1668e04,
            1.4782e04,
        ],
        [
            2.0233e02,
            5.8273e02,
            5.4834e01,
            8.5367e02,
            2.1958e02,
            4.3478e03,
            7.4640e03,
            1.3675e04,
            5.9324e03,
            1.3061e03,
            6.4298e04,
            -5.1924e04,
            -1.1587e04,
            1.6092e04,
        ],
        [
            2.0177e02,
            5.7985e02,
            5.4841e01,
            8.5018e02,
            2.1685e02,
            4.2241e03,
            7.5246e03,
            1.3767e04,
            5.8943e03,
            1.2255e03,
            6.5390e04,
            -5.1817e04,
            -1.1829e04,
            1.6372e04,
        ],
        [
            2.0170e02,
            5.8440e02,
            5.4879e01,
            8.5046e02,
            2.1879e02,
            4.3914e03,
            6.7852e03,
            1.3397e04,
            5.9116e03,
            8.7753e02,
            6.7108e04,
            -5.1517e04,
            -1.2174e04,
            1.3613e04,
        ],
    ],
    [
        [
            1.4775e03,
            9.6881e01,
            2.3575e02,
            2.9927e02,
            1.3482e02,
            2.0643e03,
            2.7670e03,
            1.0923e04,
            3.4988e03,
            1.0965e04,
            7.1034e04,
            -1.2026e05,
            2.4742e04,
            8.4539e04,
        ],
        [
            1.4784e03,
            9.6854e01,
            2.3673e02,
            2.9837e02,
            1.3487e02,
            2.0645e03,
            2.7700e03,
            1.1064e04,
            3.5005e03,
            1.0776e04,
            7.2157e04,
            -1.1984e05,
            2.4784e04,
            8.3234e04,
        ],
        [
            1.4765e03,
            9.6797e01,
            2.3860e02,
            2.9744e02,
            1.3429e02,
            2.0633e03,
            2.7712e03,
            7.2391e03,
            3.5079e03,
            1.0438e04,
            6.9129e04,
            -1.1901e05,
            2.4652e04,
            7.9833e04,
        ],
        [
            1.4827e03,
            9.6934e01,
            2.3674e02,
            2.9653e02,
            1.3533e02,
            2.0593e03,
            2.7893e03,
            7.2933e03,
            3.5169e03,
            1.0522e04,
            6.7597e04,
            -1.1883e05,
            2.4519e04,
            7.3381e04,
        ],
        [
            1.4941e03,
            9.6041e01,
            2.3616e02,
            2.9454e02,
            1.3639e02,
            2.0606e03,
            2.7868e03,
            3.2974e03,
            3.5292e03,
            9.7980e03,
            6.1161e04,
            -1.1475e05,
            2.4220e04,
            6.3502e04,
        ],
        [
            1.4762e03,
            9.6579e01,
            2.3686e02,
            2.9359e02,
            1.3644e02,
            2.0574e03,
            2.7701e03,
            2.7005e03,
            3.5187e03,
            9.5369e03,
            6.1815e04,
            -1.2063e05,
            2.4265e04,
            6.0183e04,
        ],
        [
            1.5042e03,
            9.6728e01,
            2.3962e02,
            2.9136e02,
            1.3567e02,
            2.0608e03,
            2.7665e03,
            2.3629e03,
            3.5399e03,
            9.1012e03,
            6.1951e04,
            -1.1847e05,
            2.4477e04,
            5.3698e04,
        ],
        [
            1.5033e03,
            9.6632e01,
            2.4149e02,
            2.9414e02,
            1.3558e02,
            2.0623e03,
            2.7513e03,
            2.2571e03,
            3.5361e03,
            8.8956e03,
            6.0530e04,
            -1.2218e05,
            2.4368e04,
            4.9564e04,
        ],
        [
            1.5318e03,
            9.6977e01,
            2.3899e02,
            2.9656e02,
            1.3503e02,
            2.0618e03,
            2.7479e03,
            2.0818e03,
            3.5628e03,
            8.6564e03,
            5.9346e04,
            -1.2637e05,
            2.4223e04,
            5.1728e04,
        ],
        [
            1.5229e03,
            9.7049e01,
            2.3748e02,
            2.9671e02,
            1.3529e02,
            2.0608e03,
            2.7514e03,
            1.7469e03,
            3.5548e03,
            8.8235e03,
            5.9531e04,
            -1.2657e05,
            2.4460e04,
            5.1195e04,
        ],
    ],
])
INC_OUTCOME_NON_MEDIA_FIXED = np.array([
    [
        [
            2.0238e02,
            5.8353e02,
            5.5012e01,
            8.4531e02,
            2.1926e02,
            3.8210e03,
            1.0265e04,
            1.4751e04,
            6.0696e03,
            1.5890e03,
            -2.2636e05,
            2.7909e04,
            1.5927e04,
            -2.2024e03,
        ],
        [
            2.0130e02,
            5.9968e02,
            5.5000e01,
            8.5362e02,
            2.1679e02,
            3.8963e03,
            9.4170e03,
            1.2675e04,
            6.0058e03,
            2.4013e03,
            -2.2029e05,
            2.7783e04,
            1.5135e04,
            -2.1580e03,
        ],
        [
            2.0168e02,
            5.9648e02,
            5.4964e01,
            8.5208e02,
            2.1722e02,
            3.8931e03,
            9.0868e03,
            1.2759e04,
            5.9805e03,
            2.1549e03,
            -2.2043e05,
            2.7547e04,
            1.5217e04,
            -2.2938e03,
        ],
        [
            2.0170e02,
            5.9702e02,
            5.5032e01,
            8.4916e02,
            2.1150e02,
            4.0122e03,
            8.3681e03,
            1.2248e04,
            5.9804e03,
            2.9416e03,
            -2.0820e05,
            2.6282e04,
            1.4746e04,
            -2.0872e03,
        ],
        [
            2.0122e02,
            5.9372e02,
            5.5061e01,
            8.5419e02,
            2.1136e02,
            4.0010e03,
            7.8779e03,
            1.2369e04,
            5.9740e03,
            2.6948e03,
            -2.1231e05,
            2.6613e04,
            1.4481e04,
            -2.2717e03,
        ],
        [
            1.9921e02,
            6.0462e02,
            5.4908e01,
            8.6234e02,
            2.2258e02,
            3.9312e03,
            8.0107e03,
            1.2636e04,
            5.9829e03,
            1.6394e03,
            -2.1653e05,
            2.6645e04,
            1.4125e04,
            -1.8286e03,
        ],
        [
            2.0200e02,
            5.8100e02,
            5.4900e01,
            8.6429e02,
            2.2044e02,
            3.9426e03,
            8.3308e03,
            1.2752e04,
            5.9539e03,
            1.2265e03,
            -2.0974e05,
            2.5748e04,
            1.3918e04,
            -1.8700e03,
        ],
        [
            2.0233e02,
            5.8273e02,
            5.4834e01,
            8.5367e02,
            2.1958e02,
            4.3478e03,
            7.4640e03,
            1.3675e04,
            5.9324e03,
            1.3061e03,
            -1.8806e05,
            2.5556e04,
            1.3822e04,
            -2.0398e03,
        ],
        [
            2.0177e02,
            5.7985e02,
            5.4841e01,
            8.5018e02,
            2.1685e02,
            4.2241e03,
            7.5246e03,
            1.3767e04,
            5.8943e03,
            1.2255e03,
            -1.9128e05,
            2.5484e04,
            1.4118e04,
            -2.0724e03,
        ],
        [
            2.0170e02,
            5.8440e02,
            5.4879e01,
            8.5046e02,
            2.1880e02,
            4.3914e03,
            6.7852e03,
            1.3397e04,
            5.9116e03,
            8.7753e02,
            -1.9634e05,
            2.5346e04,
            1.4537e04,
            -1.7026e03,
        ],
    ],
    [
        [
            1.4775e03,
            9.6881e01,
            2.3575e02,
            2.9927e02,
            1.3482e02,
            2.0643e03,
            2.7670e03,
            1.0923e04,
            3.4988e03,
            1.0965e04,
            -2.0844e05,
            6.6387e04,
            -3.0481e04,
            -1.0954e04,
        ],
        [
            1.4784e03,
            9.6854e01,
            2.3673e02,
            2.9837e02,
            1.3487e02,
            2.0645e03,
            2.7700e03,
            1.1064e04,
            3.5005e03,
            1.0776e04,
            -2.1175e05,
            6.6140e04,
            -3.0533e04,
            -1.0781e04,
        ],
        [
            1.4765e03,
            9.6797e01,
            2.3860e02,
            2.9744e02,
            1.3429e02,
            2.0633e03,
            2.7712e03,
            7.2391e03,
            3.5079e03,
            1.0438e04,
            -2.0282e05,
            6.5723e04,
            -3.0370e04,
            -1.0396e04,
        ],
        [
            1.4827e03,
            9.6934e01,
            2.3674e02,
            2.9653e02,
            1.3533e02,
            2.0593e03,
            2.7893e03,
            7.2933e03,
            3.5169e03,
            1.0522e04,
            -1.9833e05,
            6.5632e04,
            -3.0209e04,
            -9.5989e03,
        ],
        [
            1.4941e03,
            9.6041e01,
            2.3616e02,
            2.9454e02,
            1.3639e02,
            2.0606e03,
            2.7868e03,
            3.2974e03,
            3.5292e03,
            9.7980e03,
            -1.7931e05,
            6.3436e04,
            -2.9841e04,
            -8.3954e03,
        ],
        [
            1.4762e03,
            9.6579e01,
            2.3686e02,
            2.9359e02,
            1.3644e02,
            2.0574e03,
            2.7701e03,
            2.7005e03,
            3.5187e03,
            9.5369e03,
            -1.8124e05,
            6.6613e04,
            -2.9899e04,
            -7.8308e03,
        ],
        [
            1.5042e03,
            9.6728e01,
            2.3962e02,
            2.9136e02,
            1.3567e02,
            2.0608e03,
            2.7665e03,
            2.3629e03,
            3.5399e03,
            9.1012e03,
            -1.8158e05,
            6.5387e04,
            -3.0154e04,
            -6.9522e03,
        ],
        [
            1.5033e03,
            9.6632e01,
            2.4149e02,
            2.9414e02,
            1.3558e02,
            2.0623e03,
            2.7513e03,
            2.2571e03,
            3.5361e03,
            8.8956e03,
            -1.7739e05,
            6.7441e04,
            -3.0021e04,
            -6.4971e03,
        ],
        [
            1.5318e03,
            9.6977e01,
            2.3899e02,
            2.9656e02,
            1.3503e02,
            2.0618e03,
            2.7479e03,
            2.0818e03,
            3.5628e03,
            8.6564e03,
            -1.7395e05,
            6.9732e04,
            -2.9846e04,
            -6.7504e03,
        ],
        [
            1.5229e03,
            9.7049e01,
            2.3748e02,
            2.9671e02,
            1.3529e02,
            2.0608e03,
            2.7514e03,
            1.7469e03,
            3.5548e03,
            8.8235e03,
            -1.7453e05,
            6.9865e04,
            -3.0135e04,
            -6.6750e03,
        ],
    ],
])
EXP_OUTCOME_MEDIA_AND_RF = np.array([
    [
        95995.976562,
        91036.656250,
        89940.226562,
        89924.054688,
        88658.703125,
        87158.015625,
        87216.328125,
        88206.726562,
        88042.859375,
        85538.671875,
    ],
    [
        142462.000000,
        142355.812500,
        133744.687500,
        134008.296875,
        124047.773438,
        122486.960938,
        121510.992188,
        120669.000000,
        120208.507812,
        119883.101562,
    ],
])

MROI_MEDIA_AND_RF_USE_PRIOR = np.array([[
    [0.663448, 0.327858, 0.092093, 0.703155, 0.333721],
    [0.109153, 0.659025, 0.789705, 0.258679, 0.146770],
    [0.504966, 0.072971, 0.317654, 0.225758, 0.550853],
    [0.704545, 0.070028, 0.103097, 0.308064, 0.366198],
    [0.441332, 2.162667, 0.216292, 0.214109, 0.156306],
    [0.283340, 0.706352, 1.716193, 0.185514, 0.669286],
    [0.553115, 0.263072, 0.186831, 0.063854, 0.161197],
    [0.452297, 0.862000, 0.192508, 0.212404, 0.194098],
    [0.716915, 0.877345, 0.313522, 0.356593, 0.095142],
    [0.341568, 0.159941, 0.308903, 0.382817, 0.057693],
]])
MROI_MEDIA_AND_RF_USE_PRIOR_BY_REACH = np.array([[
    [0.663448, 0.327858, 0.092093, 2.080410, 1.123788],
    [0.109153, 0.659025, 0.789705, 0.658355, 0.607492],
    [0.504966, 0.072971, 0.317654, 0.787120, 1.057356],
    [0.704545, 0.070028, 0.103097, 0.642269, 0.710194],
    [0.441332, 2.162667, 0.216292, 0.744751, 0.598535],
    [0.283340, 0.706352, 1.716193, 0.754340, 0.964568],
    [0.553115, 0.263072, 0.186831, 0.432521, 0.649889],
    [0.452297, 0.862000, 0.192508, 0.520746, 1.081420],
    [0.716915, 0.877345, 0.313522, 1.279216, 0.310120],
    [0.341568, 0.159941, 0.308903, 1.647859, 0.665552],
]])
MROI_MEDIA_AND_RF_USE_POSTERIOR = np.array([
    [
        [0.327029, 0.973793, 0.095287, 0.618347, 0.043430],
        [0.325097, 1.000707, 0.095402, 0.648926, 0.043190],
        [0.325729, 0.995359, 0.095347, 0.649433, 0.043250],
        [0.325579, 0.996117, 0.095488, 0.635660, 0.042053],
        [0.324842, 0.990664, 0.095549, 0.650000, 0.041916],
        [0.321529, 1.008852, 0.095269, 0.658379, 0.044006],
        [0.326023, 0.969307, 0.095277, 0.658969, 0.043634],
        [0.326445, 0.972162, 0.095217, 0.651864, 0.043502],
        [0.325613, 0.967222, 0.095172, 0.650200, 0.043058],
        [0.325383, 0.974900, 0.095177, 0.659370, 0.043439],
    ],
    [
        [2.314909, 0.161721, 0.418216, 0.055032, 0.023695],
        [2.315996, 0.161701, 0.419989, 0.054855, 0.023698],
        [2.312552, 0.161583, 0.423253, 0.054725, 0.023632],
        [2.322566, 0.161842, 0.419888, 0.054572, 0.023899],
        [2.341189, 0.160330, 0.418794, 0.053628, 0.023979],
        [2.311895, 0.161220, 0.420071, 0.053580, 0.024099],
        [2.354284, 0.161466, 0.424947, 0.053221, 0.024019],
        [2.353378, 0.161283, 0.428280, 0.053752, 0.024025],
        [2.398077, 0.161867, 0.423856, 0.054188, 0.023921],
        [2.384280, 0.161995, 0.421199, 0.054135, 0.023953],
    ],
])
MROI_MEDIA_AND_RF_USE_POSTERIOR_BY_REACH = np.array([
    [
        [0.327029, 0.973793, 0.095287, 1.634559, 0.411464],
        [0.325097, 1.000707, 0.095402, 1.650527, 0.406843],
        [0.325729, 0.995359, 0.095347, 1.647611, 0.407664],
        [0.325579, 0.996117, 0.095488, 1.641947, 0.396906],
        [0.324842, 0.990664, 0.095549, 1.651601, 0.396634],
        [0.321529, 1.008852, 0.095269, 1.667391, 0.417721],
        [0.326023, 0.969307, 0.095277, 1.671239, 0.413652],
        [0.326445, 0.972162, 0.095217, 1.650680, 0.412054],
        [0.325613, 0.967222, 0.095172, 1.643929, 0.406949],
        [0.325383, 0.974900, 0.095177, 1.644449, 0.410599],
    ],
    [
        [2.314909, 0.161721, 0.418216, 0.578693, 0.253017],
        [2.315996, 0.161701, 0.419989, 0.576928, 0.253077],
        [2.312552, 0.161583, 0.423253, 0.575129, 0.251983],
        [2.322566, 0.161842, 0.419888, 0.573394, 0.253956],
        [2.341189, 0.160330, 0.418794, 0.569535, 0.255943],
        [2.311895, 0.161220, 0.420071, 0.567682, 0.256041],
        [2.354284, 0.161466, 0.424947, 0.563362, 0.254597],
        [2.353378, 0.161283, 0.428280, 0.568756, 0.254437],
        [2.398077, 0.161867, 0.423856, 0.573441, 0.253420],
        [2.384280, 0.161995, 0.421199, 0.573718, 0.253881],
    ],
])
MROI_MEDIA_ONLY_USE_PRIOR = np.array([[
    [1.0740, 1.3019, 0.7984],
    [0.8990, 0.4201, 0.7120],
    [0.1340, 0.4114, 0.2389],
    [1.1974, 0.9624, 0.3721],
    [0.2613, 0.3995, 2.0881],
    [2.7704, 0.8456, 0.1207],
    [0.4953, 0.0424, 0.0423],
    [0.2991, 0.4112, 0.7823],
    [0.4918, 1.0556, 0.3962],
    [0.1665, 1.0178, 0.3253],
]])
MROI_MEDIA_ONLY_USE_POSTERIOR = np.array([
    [
        [0.4422, 9.3207, 2.3945],
        [0.1470, 12.8182, 0.1610],
        [1.0377, 13.3305, 1.8174],
        [0.0568, 14.6320, 0.4360],
        [0.1162, 5.4620, 0.2345],
        [4.7597, 5.0803, 0.2372],
        [1.1496, 11.8842, 0.4796],
        [0.9482, 12.9420, 1.6867],
        [0.8706, 14.3139, 0.5490],
        [1.6256, 4.4582, 0.1215],
    ],
    [
        [0.1977, 5.3532, 0.3220],
        [0.1976, 5.3530, 0.3220],
        [0.1977, 5.3534, 0.3220],
        [0.1977, 5.3533, 0.3220],
        [0.1977, 5.3531, 0.3220],
        [0.1977, 5.3531, 0.3220],
        [0.1977, 5.3543, 0.3219],
        [0.1973, 5.3592, 0.3223],
        [0.1977, 5.3426, 0.3237],
        [0.1973, 5.3541, 0.3248],
    ],
])
MROI_RF_ONLY_USE_PRIOR = np.array([[
    [0.5429, 0.3957],
    [0.4478, 0.2091],
    [1.9448, 0.2493],
    [0.2426, 1.0238],
    [0.4595, 0.5257],
    [1.4106, 0.5619],
    [0.6273, 0.1139],
    [1.8461, 2.2882],
    [0.5036, 0.8826],
    [0.2506, 0.7252],
]])
MROI_RF_ONLY_USE_PRIOR_BY_REACH = np.array([[
    [2.3753, 1.1037],
    [1.6244, 0.8928],
    [4.8863, 0.3513],
    [0.6133, 2.0871],
    [1.0978, 1.0359],
    [5.0919, 1.7021],
    [1.1755, 0.5495],
    [2.9831, 6.0266],
    [0.9513, 3.0227],
    [0.5975, 2.3417],
]])
MROI_RF_ONLY_USE_POSTERIOR = np.array([
    [
        [1.1980, 0.6598],
        [1.2059, 0.6493],
        [1.1873, 0.6377],
        [1.1821, 0.6507],
        [1.2059, 0.6492],
        [1.2163, 0.6443],
        [1.2193, 0.6353],
        [1.2197, 0.6444],
        [1.2144, 0.6423],
        [1.2055, 0.6393],
    ],
    [
        [1.6838, 1.0183],
        [1.6449, 0.2891],
        [1.8734, 0.6988],
        [1.8439, 0.2740],
        [2.2058, 0.5334],
        [1.7365, 0.3025],
        [1.8021, 0.5561],
        [3.3720, 0.3345],
        [2.6666, 0.5455],
        [2.8244, 0.3173],
    ],
])
MROI_RF_ONLY_USE_POSTERIOR_BY_REACH = np.array([
    [
        [1.4183, 3.6023],
        [1.4208, 3.6155],
        [1.3974, 3.5974],
        [1.4042, 3.6202],
        [1.4139, 3.6172],
        [1.4103, 3.5999],
        [1.4261, 3.5983],
        [1.4050, 3.6211],
        [1.4014, 3.6159],
        [1.4058, 3.5957],
    ],
    [
        [4.3477, 1.2222],
        [4.3790, 1.1917],
        [4.0231, 1.1834],
        [4.8855, 1.2039],
        [5.2465, 1.1637],
        [5.2446, 1.1340],
        [5.5086, 1.0636],
        [5.9674, 1.0501],
        [5.9643, 1.0677],
        [7.6481, 1.0991],
    ],
])

SAMPLE_ROI = np.array([
    [
        [1.1691, 1.5741],
        [1.1102, 1.5577],
        [0.2855, 0.3733],
        [2.1605, 2.8273],
    ],
    [
        [1.0695, 0.6558],
        [0.7907, 0.6461],
        [0.1904, 0.1843],
        [2.5660, 1.1452],
    ],
    [
        [0.9742, 0.2923],
        [0.6185, 0.2904],
        [0.3057, 0.1095],
        [2.2203, 0.4787],
    ],
    [
        [0.9547, 1.1112],
        [0.7496, 1.1066],
        [0.4722, 0.5675],
        [1.8857, 1.6676],
    ],
    [
        [0.7769, 0.3310],
        [0.6879, 0.3263],
        [0.4399, 0.2530],
        [1.1047, 0.4139],
    ],
    [
        [0.9894, 0.7994],
        [0.9274, 0.8003],
        [0.6688, 0.7291],
        [1.4123, 0.8762],
    ],
])
SAMPLE_ROI_NEW_DATA = np.array([
    [
        [2.0160, 2.5145],
        [1.8529, 2.4882],
        [0.4825, 0.5349],
        [3.8176, 4.5810],
    ],
    [
        [1.7171, 1.0775],
        [1.3301, 1.0607],
        [0.3114, 0.2958],
        [4.0019, 1.8899],
    ],
    [
        [1.6003, 0.4714],
        [1.0359, 0.4684],
        [0.4990, 0.1760],
        [3.6329, 0.7724],
    ],
    [
        [0.9560, 1.1128],
        [0.7504, 1.1084],
        [0.4726, 0.5676],
        [1.8904, 1.6706],
    ],
    [
        [0.7759, 0.3314],
        [0.6872, 0.3267],
        [0.4397, 0.2530],
        [1.1062, 0.4145],
    ],
    [
        [1.2807, 1.0004],
        [1.2012, 1.0026],
        [0.8557, 0.9548],
        [1.8161, 1.0531],
    ],
])
SAMPLE_ROI_KPI = np.array([
    [
        [0.3723, 0.5013],
        [0.3536, 0.4961],
        [0.0909, 0.1189],
        [0.6881, 0.9004],
    ],
    [
        [0.3406, 0.2088],
        [0.2518, 0.2058],
        [0.0606, 0.0587],
        [0.8172, 0.3647],
    ],
    [
        [0.3103, 0.0931],
        [0.1970, 0.0925],
        [0.0974, 0.0349],
        [0.7071, 0.1525],
    ],
    [
        [0.3041, 0.3539],
        [0.2387, 0.3524],
        [0.1504, 0.1807],
        [0.6005, 0.5311],
    ],
    [
        [0.2474, 0.1054],
        [0.2191, 0.1039],
        [0.1401, 0.0806],
        [0.3518, 0.1318],
    ],
    [
        [0.3151, 0.2546],
        [0.2953, 0.2549],
        [0.2130, 0.2322],
        [0.4498, 0.2790],
    ],
])
SAMPLE_MROI = np.array([
    [
        [0.4771, 1.3331],
        [0.4786, 1.3195],
        [0.1875, 0.3247],
        [0.7113, 2.3850],
    ],
    [
        [0.6161, 0.5732],
        [0.4934, 0.5646],
        [0.0714, 0.1612],
        [1.5843, 1.0011],
    ],
    [
        [0.4237, 0.2586],
        [0.2626, 0.2569],
        [0.0970, 0.0952],
        [1.2993, 0.4251],
    ],
    [
        [0.2911, 0.3511],
        [0.2422, 0.3367],
        [0.1186, 0.0536],
        [0.5590, 0.6590],
    ],
    [
        [0.2731, 0.0335],
        [0.1776, 0.0330],
        [0.0745, 0.0237],
        [0.6160, 0.0437],
    ],
    [
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
    ],
])
SAMPLE_MROI_NEW_DATA = np.array([
    [
        [0.8978, 2.1838],
        [0.9372, 2.1614],
        [0.3320, 0.4814],
        [1.3581, 3.9598],
    ],
    [
        [1.0041, 0.9421],
        [0.8115, 0.9273],
        [0.1230, 0.2591],
        [2.5356, 1.6520],
    ],
    [
        [0.7225, 0.4206],
        [0.4558, 0.4180],
        [0.1719, 0.1545],
        [2.1838, 0.6916],
    ],
    [
        [0.2961, 0.3593],
        [0.2469, 0.3444],
        [0.1201, 0.0540],
        [0.5703, 0.6750],
    ],
    [
        [0.2755, 0.0337],
        [0.1800, 0.0331],
        [0.0753, 0.0237],
        [0.6184, 0.0439],
    ],
    [
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
    ],
])
SAMPLE_MROI_KPI = np.array([
    [
        [0.1519, 0.4246],
        [0.1524, 0.4202],
        [0.0597, 0.1034],
        [0.2265, 0.7596],
    ],
    [
        [0.1962, 0.1825],
        [0.1571, 0.1798],
        [0.0227, 0.0513],
        [0.5045, 0.3188],
    ],
    [
        [0.1349, 0.0824],
        [0.0836, 0.0818],
        [0.0309, 0.0303],
        [0.4138, 0.1354],
    ],
    [
        [0.0927, 0.1118],
        [0.0771, 0.1072],
        [0.0378, 0.0171],
        [0.1780, 0.2099],
    ],
    [
        [0.0870, 0.0107],
        [0.0566, 0.0105],
        [0.0237, 0.0075],
        [0.1962, 0.0139],
    ],
    [
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
    ],
])
SAMPLE_CPIK = np.array([
    [
        [4.6542, 4.7636],
        [2.8478, 4.7530],
        [1.4534, 1.1106],
        [13.5345, 8.4121],
    ],
    [
        [6.3162, 9.8947],
        [4.1574, 9.8930],
        [1.3133, 2.7419],
        [18.8025, 17.0365],
    ],
    [
        [5.3826, 17.6145],
        [5.1113, 17.6131],
        [1.4870, 6.5592],
        [10.6194, 28.6709],
    ],
    [
        [4.1186, 3.6960],
        [4.1893, 3.6736],
        [1.6876, 1.8829],
        [6.7064, 5.5333],
    ],
    [
        [4.6434, 10.0289],
        [4.5696, 10.0900],
        [2.8434, 7.5868],
        [7.9297, 12.4130],
    ],
    [
        [3.3859, 3.9548],
        [3.3870, 3.9430],
        [2.2234, 3.5836],
        [4.7079, 4.3068],
    ],
])
SAMPLE_CPIK_NEW_DATA = np.array([
    [
        [2.7738, 3.2788],
        [1.7099, 3.2659],
        [0.8225, 0.6854],
        [8.1902, 5.8707],
    ],
    [
        [3.8491, 6.1422],
        [2.4978, 6.1424],
        [0.8268, 1.6615],
        [11.3844, 10.6160],
    ],
    [
        [3.2583, 10.9560],
        [3.0426, 10.9549],
        [0.9160, 4.0652],
        [6.4140, 17.8452],
    ],
    [
        [4.1157, 3.6934],
        [4.1846, 3.6708],
        [1.6836, 1.8796],
        [6.6985, 5.5316],
    ],
    [
        [4.6485, 10.0211],
        [4.5736, 10.0821],
        [2.8396, 7.5755],
        [7.9377, 12.4089],
    ],
    [
        [2.6195, 3.1440],
        [2.6148, 3.1345],
        [1.7292, 2.9818],
        [3.6766, 3.2887],
    ],
])
SAMPLE_EFFECTIVENESS = np.array([
    [
        [3.7119e-01, 4.9979e-01],
        [3.5248e-01, 4.9457e-01],
        [9.0647e-02, 1.1852e-01],
        [6.8597e-01, 8.9767e-01],
    ],
    [
        [3.4563e-01, 2.1192e-01],
        [2.5553e-01, 2.0879e-01],
        [6.1528e-02, 5.9563e-02],
        [8.2925e-01, 3.7010e-01],
    ],
    [
        [3.2137e-01, 9.6438e-02],
        [2.0402e-01, 9.5786e-02],
        [1.0084e-01, 3.6127e-02],
        [7.3240e-01, 1.5792e-01],
    ],
    [
        [1.2327e-04, 1.4347e-04],
        [9.6776e-05, 1.4287e-04],
        [6.0968e-05, 7.3267e-05],
        [2.4347e-04, 2.1531e-04],
    ],
    [
        [9.7796e-05, 4.1672e-05],
        [8.6592e-05, 4.1081e-05],
        [5.5376e-05, 3.1843e-05],
        [1.3906e-04, 5.2100e-05],
    ],
    [
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
    ],
])
SAMPLE_EFFECTIVENESS_NEW_DATA = np.array([
    [
        [4.0705e-01, 5.0772e-01],
        [3.7413e-01, 5.0241e-01],
        [9.7431e-02, 1.0800e-01],
        [7.7082e-01, 9.2497e-01],
    ],
    [
        [3.3682e-01, 2.1134e-01],
        [2.6091e-01, 2.0806e-01],
        [6.1084e-02, 5.8018e-02],
        [7.8497e-01, 3.7070e-01],
    ],
    [
        [3.2687e-01, 9.6291e-02],
        [2.1159e-01, 9.5675e-02],
        [1.0192e-01, 3.5941e-02],
        [7.4205e-01, 1.5777e-01],
    ],
    [
        [1.2479e-04, 1.4527e-04],
        [9.7955e-05, 1.4469e-04],
        [6.1688e-05, 7.4098e-05],
        [2.4677e-04, 2.1807e-04],
    ],
    [
        [9.8454e-05, 4.2047e-05],
        [8.7187e-05, 4.1450e-05],
        [5.5787e-05, 3.2107e-05],
        [1.4036e-04, 5.2592e-05],
    ],
    [
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
    ],
])
SAMPLE_EFFECTIVENESS_KPI = np.array([
    [
        [1.1821e-01, 1.5917e-01],
        [1.1225e-01, 1.5751e-01],
        [2.8868e-02, 3.7744e-02],
        [2.1846e-01, 2.8588e-01],
    ],
    [
        [1.1007e-01, 6.7491e-02],
        [8.1379e-02, 6.6494e-02],
        [1.9595e-02, 1.8969e-02],
        [2.6409e-01, 1.1786e-01],
    ],
    [
        [1.0235e-01, 3.0713e-02],
        [6.4976e-02, 3.0505e-02],
        [3.2114e-02, 1.1505e-02],
        [2.3325e-01, 5.0292e-02],
    ],
    [
        [3.9258e-05, 4.5692e-05],
        [3.0820e-05, 4.5501e-05],
        [1.9417e-05, 2.3333e-05],
        [7.7537e-05, 6.8570e-05],
    ],
    [
        [3.1145e-05, 1.3271e-05],
        [2.7577e-05, 1.3083e-05],
        [1.7636e-05, 1.0141e-05],
        [4.4288e-05, 1.6592e-05],
    ],
    [
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
        [math.nan, math.nan],
    ],
])
SAMPLE_SPEND = np.array([538.808, 523.855, 500.745, 517.165, 532.877, 2613.449])
SAMPLE_SPEND_NEW_DATA = np.array([
    281.872,
    314.627,
    288.819,
    517.165,
    532.877,
    1935.360,
])
SAMPLE_PCT_OF_SPEND = np.array([20.617, 20.045, 19.160, 19.789, 20.390, 100.0])
SAMPLE_PCT_OF_SPEND_NEW_DATA = np.array([
    14.564,
    16.257,
    14.923,
    26.722,
    27.534,
    100.0,
])

SAMPLE_INCREMENTAL_OUTCOME = np.array([
    [
        [629.9092, 848.1439],
        [598.1581, 839.2843],
        [153.8277, 201.1239],
        [1164.0947, 1523.3477],
    ],
    [
        [560.2616, 343.5253],
        [414.2129, 338.4509],
        [99.7367, 96.5518],
        [1344.2158, 599.9241],
    ],
    [
        [487.8384, 146.3927],
        [309.7082, 145.4034],
        [153.0709, 54.8409],
        [1111.7866, 239.7163],
    ],
    [
        [493.7634, 574.6901],
        [387.6440, 572.2914],
        [244.2137, 293.4758],
        [975.2300, 862.4373],
    ],
    [
        [413.9842, 176.4043],
        [366.5557, 173.9000],
        [234.4155, 134.7973],
        [588.6749, 220.5456],
    ],
    [
        [2585.7573, 2089.1565],
        [2423.6138, 2091.6606],
        [1747.9718, 1905.3915],
        [3690.8872, 2289.9336],
    ],
])
SAMPLE_INCREMENTAL_OUTCOME_NEW_DATA = np.array([
    [
        [568.2450, 708.7755],
        [522.2855, 701.3608],
        [136.0137, 150.7625],
        [1076.0704, 1291.2604],
    ],
    [
        [540.2577, 338.9954],
        [418.5006, 333.7247],
        [97.9785, 93.0607],
        [1259.0955, 594.5983],
    ],
    [
        [462.1980, 136.1557],
        [299.1925, 135.2841],
        [144.1183, 50.8201],
        [1049.2593, 223.0859],
    ],
    [
        [494.4030, 575.5251],
        [388.0851, 573.2413],
        [244.3988, 293.5681],
        [977.6578, 863.9521],
    ],
    [
        [413.4851, 176.5890],
        [366.1668, 174.0802],
        [234.2956, 134.8418],
        [589.4932, 220.8746],
    ],
    [
        [2478.5891, 1936.0408],
        [2324.7144, 1940.2991],
        [1656.1229, 1847.8324],
        [3514.9000, 2038.0546],
    ],
])
SAMPLE_INC_OUTCOME_KPI = np.array([
    [
        [200.6080, 270.1096],
        [190.4962, 267.2880],
        [48.9897, 64.0522],
        [370.7308, 485.1426],
    ],
    [
        [178.4273, 109.4030],
        [131.9149, 107.7869],
        [31.7633, 30.7490],
        [428.0943, 191.0586],
    ],
    [
        [155.3625, 46.6219],
        [98.6332, 46.3068],
        [48.7487, 17.4652],
        [354.0722, 76.3428],
    ],
    [
        [157.2495, 183.0223],
        [123.4535, 182.2585],
        [77.7751, 93.4636],
        [310.5828, 274.6615],
    ],
    [
        [131.8421, 56.1797],
        [116.7375, 55.3821],
        [74.6546, 42.9291],
        [187.4761, 70.2374],
    ],
    [
        [823.4894, 665.3365],
        [771.8514, 666.1340],
        [556.6789, 606.8127],
        [1175.4420, 729.2781],
    ],
])
SAMPLE_BASELINE_EXPECTED_OUTCOME = np.array([
    [11180.9931, 20127.6386],
    [-919.5247, 20048.3613],
    [-24876.6487, 13877.7523],
    [55426.2115, 26502.3695],
])
SAMPLE_BASELINE_EXPECTED_OUTCOME_NON_PAID = np.array([
    [28603.550781, -164909.265625],
    [-23746.906250, -162922.906250],
    [-848103.125000, -204543.078125],
    [955249.625000, -137288.750000],
])
SAMPLE_PCT_OF_CONTRIBUTION = np.array([
    [
        [7.6862e-06, 1.5612],
        [7.2987e-06, 1.5449],
        [1.8770e-06, 0.3702],
        [1.4204e-05, 2.8040],
    ],
    [
        [6.8363e-06, 0.6323],
        [5.0542e-06, 0.6230],
        [1.2170e-06, 0.1777],
        [1.6402e-05, 1.1043],
    ],
    [
        [5.9526e-06, 0.2695],
        [3.7791e-06, 0.2676],
        [1.8678e-06, 0.1009],
        [1.3566e-05, 0.4412],
    ],
    [
        [6.0249e-06, 1.0578],
        [4.7300e-06, 1.0534],
        [2.9799e-06, 0.5402],
        [1.1900e-05, 1.5875],
    ],
    [
        [5.0514e-06, 0.3247],
        [4.4727e-06, 0.3201],
        [2.8603e-06, 0.2481],
        [7.1830e-06, 0.4060],
    ],
    [
        [3.1551e-05, 3.8455],
        [2.9573e-05, 3.8501],
        [2.1329e-05, 3.5072],
        [4.5036e-05, 4.2151],
    ],
])
SAMPLE_PCT_OF_CONTRIBUTION_NEW_DATA = np.array([
    [
        [6.9464e-06, 1.3460],
        [6.3845e-06, 1.3319],
        [1.6627e-06, 0.2863],
        [1.3154e-05, 2.4522],
    ],
    [
        [6.6042e-06, 0.6438],
        [5.1158e-06, 0.6338],
        [1.1977e-06, 0.1767],
        [1.5391e-05, 1.1292],
    ],
    [
        [5.6500e-06, 0.2586],
        [3.6574e-06, 0.2569],
        [1.7617e-06, 0.0965],
        [1.2826e-05, 0.4237],
    ],
    [
        [6.0437e-06, 1.0930],
        [4.7440e-06, 1.0886],
        [2.9876e-06, 0.5575],
        [1.1951e-05, 1.6407],
    ],
    [
        [5.0545e-06, 0.3354],
        [4.4761e-06, 0.3306],
        [2.8641e-06, 0.2561],
        [7.2061e-06, 0.4195],
    ],
    [
        [3.0299e-05, 3.6767],
        [2.8418e-05, 3.6848],
        [2.0245e-05, 3.5092],
        [4.2967e-05, 3.8704],
    ],
])
SAMPLE_BASELINE_PCT_OF_CONTRIBUTION = np.array([
    [79.5945, 92.6015],
    [-6.5458, 92.2368],
    [-177.0902, 63.8475],
    [394.5644, 121.9298],
])
SAMPLE_BASELINE_PCT_OF_CONTRIBUTION_NON_PAID = np.array([
    [3.490000e-04, -3.035472e02],
    [-2.900000e-04, -2.998910e02],
    [-1.034900e-02, -3.765009e02],
    [1.165600e-02, -2.527064e02],
])
ADSTOCK_DECAY_CI_HI = np.array(
    [1.000000, 1.000000, 0.952087, 0.957447, 0.906471]
)
ADSTOCK_DECAY_CI_LO = np.array(
    [1.000000, 1.000000, 0.920679, 0.590205, 0.847649]
)
ADSTOCK_DECAY_MEAN = np.array(
    [1.000000, 1.000000, 0.936519, 0.800840, 0.877307]
)
ORGANIC_ADSTOCK_DECAY_CI_HI = np.array(
    [1.000000, 0.963652, 0.929110, 0.896271, 0.865039]
)
ORGANIC_ADSTOCK_DECAY_CI_LO = np.array(
    [1.000000, 0.662379, 0.439487, 0.292093, 0.194461]
)
ORGANIC_ADSTOCK_DECAY_MEAN = np.array(
    [1.000000, 0.807613, 0.663384, 0.553796, 0.469390]
)
ORGANIC_RF_ADSTOCK_DECAY_CI_HI = np.array(
    [1.000000, 0.920871, 0.848235, 0.781539, 0.720281]
)
ORGANIC_RF_ADSTOCK_DECAY_CI_LO = np.array(
    [1.000000, 0.667414, 0.446086, 0.298588, 0.200151]
)
ORGANIC_RF_ADSTOCK_DECAY_MEAN = np.array(
    [1.000000, 0.834437, 0.704232, 0.600117, 0.515585]
)
HILL_CURVES_CI_HI = np.array([0.000000, 0.000000, 0.000940, 0.015828, 0.001879])
HILL_CURVES_CI_LO = np.array([0.000000, 0.000000, 0.000724, 0.002680, 0.001448])
HILL_CURVES_MEAN = np.array([0.000000, 0.000000, 0.000831, 0.007259, 0.001661])
HILL_CURVES_COUNT_HISTOGRAM = np.array(
    [34.551280, 34.551280, 51.826919, 51.826919, 17.275640]
)
HILL_CURVES_SCALED_COUNT_HISTOGRAM = np.array(
    [0.066667, 0.066667, 0.100000, 0.100000, 0.033333]
)
HILL_CURVES_START_INTERVAL_HISTOGRAM = np.array(
    [0.004762, 0.004985, 0.005207, 0.005430, 0.005652]
)
HILL_CURVES_END_INTERVAL_HISTOGRAM = np.array(
    [0.004985, 0.005207, 0.005430, 0.005652, 0.005875]
)

PREDICTIVE_ACCURACY_NO_HOLDOUT_ID_NO_GEOS_OR_TIMES = np.array(
    [-13.11998, -41.134495, 7.050956, 1.576558, 1.839819, 1.41748]
)

PREDICTIVE_ACCURACY_NO_HOLDOUT_ID_GEOS_NO_TIMES = np.array(
    [-17.4737, -21.95524, 3.440617, 2.037085, 1.871296, 1.608917]
)

PREDICTIVE_ACCURACY_NO_HOLDOUT_ID_TIMES_NO_GEOS = np.array(
    [-5.200158, -14.360085, 2.783542, 1.813181, 1.969059, 1.630899]
)

PREDICTIVE_ACCURACY_NO_HOLDOUT_ID_TIMES_AND_GEOS = np.array(
    [-83.89444, -109.601898, 2.483649, 2.314998, 2.27715, 2.27715]
)
PREDICTIVE_ACCURACY_HOLDOUT_ID_NO_GEOS_OR_TIMES = np.array([
    -14.0077,
    -9.438732,
    -13.164602,
    -25.291996,
    -4.443773,
    -41.412197,
    7.992115,
    2.815381,
    7.041286,
    1.777437,
    2.857527,
    1.582874,
    1.91827,
    1.52937,
    1.843663,
    1.545207,
    1.347199,
    1.422958,
])
PREDICTIVE_ACCURACY_HOLDOUT_ID_GEOS_NO_TIMES = np.array([
    -21.239647,
    -8.714068,
    -17.561241,
    -19.932484,
    -10.37943,
    -22.103785,
    3.533077,
    3.077246,
    3.454004,
    2.25643,
    2.618069,
    2.04368,
    1.955042,
    1.561111,
    1.877057,
    1.786128,
    1.561112,
    1.614655,
])
PREDICTIVE_ACCURACY_HOLDOUT_ID_TIMES_NO_GEOS = np.array([
    -4.565559,
    -223.813522,
    -5.189219,
    -7.604362,
    -223.813522,
    -14.312949,
    2.884331,
    1.915064,
    2.755096,
    1.847324,
    1.915064,
    1.810459,
    1.975816,
    1.895989,
    1.96517,
    1.58678,
    1.895989,
    1.628021,
])
PREDICTIVE_ACCURACY_HOLDOUT_ID_TIMES_AND_GEO = np.array([
    -92.719315,
    -223.813522,
    -84.546265,
    -26.574627,
    -223.813522,
    -110.403526,
    2.778062,
    1.915064,
    2.490396,
    3.06612,
    1.915064,
    2.323678,
    2.540163,
    1.895989,
    2.28554,
    2.540163,
    1.895989,
    2.28554,
])
PREDICTIVE_ACCURACY_HOLDOUT_ID_NATIONAL_NO_TIMES = np.array([
    -15.619549,
    -28.130356,
    -17.316074,
    16.30377,
    10.817584,
    15.296103,
    2.40538,
    2.640707,
    2.449049,
])
PREDICTIVE_ACCURACY_HOLDOUT_ID_NATIONAL_TIMES = np.array([
    -22.270792,
    np.nan,
    -22.270792,
    161.652573,
    np.nan,
    161.652573,
    4.597788,
    np.nan,
    4.597788,
])

SAMPLE_IMPRESSIONS = np.array([
    1.6970000e03,
    1.6210000e03,
    1.5180000e03,
    4.0055878e06,
    4.2331250e06,
    8.2435490e06,
])
SAMPLE_IMPRESSIONS_NEW_DATA = np.array([
    1.396000e03,
    1.604000e03,
    1.414000e03,
    3.961864e06,
    4.199792e06,
    8.166070e06,
])
SAMPLE_PCT_OF_IMPRESSIONS = np.array([
    2.058579e-02,
    1.966386e-02,
    1.841440e-02,
    4.859057e01,
    5.135076e01,
    1.000000e02,
])
SAMPLE_PCT_OF_IMPRESSIONS_NEW_DATA = np.array([
    1.709513e-02,
    1.964225e-02,
    1.731555e-02,
    4.851617e01,
    5.142978e01,
    1.000000e02,
])

SAMPLE_CPM = np.array([
    3.175060e02,
    3.231676e02,
    3.298715e02,
    1.291110e-01,
    1.258826e-01,
    3.170297e-01,
])
SAMPLE_CPM_NEW_DATA = np.array([
    2.019140e02,
    1.961513e02,
    2.042568e02,
    1.305359e-01,
    1.268817e-01,
    2.370002e-01,
])


def generate_model_fit_data(
    geo: Sequence[str] | None = None,
    time: Sequence[str] | None = None,
    actual: Sequence[Sequence[int]] | None = None,
) -> xr.Dataset:
  """Helper method to generate simulated model fit analyzed data."""
  metric = [c.MEAN, c.MEDIAN, c.CI_LO, c.CI_HI]
  if geo:
    n_geos = len(geo)
  else:
    n_geos = 5
    geo = [f"geo {i}" for i in range(n_geos)]
  if time:
    n_time = len(time)
  else:
    n_time = 52
    time = pd.date_range("2023-01-01", freq="W-SUN", periods=n_time).format(
        formatter=lambda x: x.strftime("%Y-%m-%d")
    )

  np.random.seed(0)
  expected = abs(np.random.lognormal(10, 1, size=(n_geos, n_time, 4)))
  baseline = abs(np.random.lognormal(10, 1, size=(n_geos, n_time, 4)))
  if not actual:
    actual = abs(np.random.lognormal(10, 1, size=(n_geos, n_time)))

  return xr.Dataset(
      data_vars={
          c.EXPECTED: (
              [c.GEO, c.TIME, c.METRIC],
              expected,
          ),
          c.BASELINE: (
              [c.GEO, c.TIME, c.METRIC],
              baseline,
          ),
          c.ACTUAL: ([c.GEO, c.TIME], actual),
      },
      coords={
          c.GEO: geo,
          c.TIME: time,
          c.METRIC: metric,
      },
      attrs={c.CONFIDENCE_LEVEL: c.DEFAULT_CONFIDENCE_LEVEL},
  )


def generate_predictive_accuracy_table(
    with_holdout: bool = False, column_var: str | None = None
) -> pd.DataFrame:
  """Helper method to simulate predictive accuracy DataFrame for Summarizer."""
  metric = [c.R_SQUARED, c.MAPE, c.WMAPE]
  geo_granularity = [c.GEO, c.NATIONAL]
  evaluation_set = [c.TRAIN, c.TEST, c.ALL_DATA]

  shape = [len(metric), len(geo_granularity)]
  dims = [c.METRIC, c.GEO_GRANULARITY]
  coords = {
      c.METRIC: metric,
      c.GEO_GRANULARITY: geo_granularity,
  }
  if with_holdout:
    shape.append(len(evaluation_set))
    dims.append(c.EVALUATION_SET_VAR)
    coords[c.EVALUATION_SET_VAR] = evaluation_set
  np.random.seed(0)
  value = np.random.lognormal(0, 1, size=shape)
  ds = xr.Dataset(
      data_vars={
          c.VALUE: (dims, value),
      },
      coords=coords,
  )
  df = ds.to_dataframe().reset_index()
  if not column_var:
    return df
  coords = list(ds.coords)
  if column_var not in coords:
    raise ValueError(
        f"The DataFrame cannot be pivoted by {column_var} as it does not"
        " exist in the DataFrame."
    )
  indices = coords.copy()
  indices.remove(column_var)
  pivoted_df = (
      df.pivot(
          index=indices,
          columns=column_var,
          values=c.VALUE,
      )
      .reset_index()
      .rename_axis(None, axis=1)
  )
  # The 2-Pager displays the national predictive accuracy metric data only.
  national_table = pivoted_df[pivoted_df[c.GEO_GRANULARITY] == c.NATIONAL]
  return national_table


def generate_paid_summary_metrics() -> xr.Dataset:
  """Helper method to generate simulated media summary metrics data."""
  channel = [f"ch_{i}" for i in range(3)] + [f"rf_ch_{i}" for i in range(2)]
  channel.append(c.ALL_CHANNELS)
  metric = [c.MEAN, c.MEDIAN, c.CI_LO, c.CI_HI]
  distribution = [c.PRIOR, c.POSTERIOR]

  np.random.seed(0)
  shape = (len(channel), len(metric), len(distribution))
  pct_of_spend = np.random.randint(low=0, high=100, size=len(channel))
  spend = np.random.randint(low=10, high=1000, size=len(channel))
  impressions = np.random.randint(low=10, high=1000, size=len(channel))
  cpm = np.random.random(size=len(channel))
  roi = np.random.lognormal(1, 1, size=shape)
  mroi = np.random.lognormal(0, 1, size=shape)
  cpik = np.random.lognormal(0, 1, size=shape)
  incremental_outcome = np.random.lognormal(10, 1, size=shape)
  effectiveness = np.random.lognormal(1, 1, size=shape)
  pct_of_contribution = np.random.randint(low=0, high=50, size=shape)
  pct_of_impressions = np.random.randint(low=0, high=100, size=len(channel))

  return xr.Dataset(
      data_vars={
          c.IMPRESSIONS: ([c.CHANNEL], impressions),
          c.PCT_OF_IMPRESSIONS: ([c.CHANNEL], pct_of_impressions),
          c.SPEND: ([c.CHANNEL], spend),
          c.PCT_OF_SPEND: ([c.CHANNEL], pct_of_spend),
          c.CPM: ([c.CHANNEL], cpm),
          c.INCREMENTAL_OUTCOME: (
              [c.CHANNEL, c.METRIC, c.DISTRIBUTION],
              incremental_outcome,
          ),
          c.PCT_OF_CONTRIBUTION: (
              [c.CHANNEL, c.METRIC, c.DISTRIBUTION],
              pct_of_contribution,
          ),
          c.ROI: (
              [c.CHANNEL, c.METRIC, c.DISTRIBUTION],
              roi,
          ),
          c.EFFECTIVENESS: (
              [c.CHANNEL, c.METRIC, c.DISTRIBUTION],
              effectiveness,
          ),
          c.MROI: (
              [c.CHANNEL, c.METRIC, c.DISTRIBUTION],
              mroi,
          ),
          c.CPIK: (
              [c.CHANNEL, c.METRIC, c.DISTRIBUTION],
              cpik,
          ),
      },
      coords={
          c.CHANNEL: channel,
          c.METRIC: metric,
          c.DISTRIBUTION: distribution,
      },
      attrs={c.CONFIDENCE_LEVEL: c.DEFAULT_CONFIDENCE_LEVEL},
  )


def generate_all_summary_metrics(aggregate_times: bool = True) -> xr.Dataset:
  """Helper method to generate simulated summary metrics data."""
  channel = (
      [f"ch_{i}" for i in range(3)]
      + [f"rf_ch_{i}" for i in range(2)]
      + [f"organic_media_{i}" for i in range(4)]
      + [f"organic_rf_ch_{i}" for i in range(1)]
      + [f"non_media_{i}" for i in range(2)]
  )
  channel.append(c.ALL_CHANNELS)
  metric = [c.MEAN, c.MEDIAN, c.CI_LO, c.CI_HI]
  distribution = [c.PRIOR, c.POSTERIOR]
  time = pd.date_range("2023-01-01", freq="W-SUN", periods=5).format(
      formatter=lambda x: x.strftime("%Y-%m-%d")
  )

  np.random.seed(0)

  if aggregate_times:
    shape = (len(channel), len(metric), len(distribution))
    dims = [c.CHANNEL, c.METRIC, c.DISTRIBUTION]
  else:
    shape = (len(time), len(channel), len(metric), len(distribution))
    dims = [c.TIME, c.CHANNEL, c.METRIC, c.DISTRIBUTION]

  incremental_outcome = np.random.lognormal(10, 1, size=shape)
  effectiveness = np.random.lognormal(1, 1, size=shape)
  pct_of_contribution = np.random.randint(low=0, high=50, size=shape)

  coords = {
      c.CHANNEL: channel,
      c.METRIC: metric,
      c.DISTRIBUTION: distribution,
  }
  if not aggregate_times:
    coords[c.TIME] = time

  return xr.Dataset(
      data_vars={
          c.INCREMENTAL_OUTCOME: (dims, incremental_outcome),
          c.PCT_OF_CONTRIBUTION: (dims, pct_of_contribution),
          c.EFFECTIVENESS: (dims, effectiveness),
      },
      coords=coords,
      attrs={c.CONFIDENCE_LEVEL: c.DEFAULT_CONFIDENCE_LEVEL},
  )


def generate_response_curve_data(
    n_channels: int = 5, spend_multiplier: Sequence[int] | None = None
) -> xr.Dataset:
  """Helper method to generate simulated response curve data."""
  channels = [f"channel {i}" for i in range(n_channels)]
  metric = [c.MEAN, c.CI_LO, c.CI_HI]
  spend_multiplier = (
      list(np.arange(0, 2, 0.05))
      if spend_multiplier is None
      else spend_multiplier
  )

  np.random.seed(0)
  shape = (
      len(spend_multiplier),
      len(channels),
      len(metric),
  )
  spend = np.random.lognormal(
      25, 1, size=(len(spend_multiplier), len(channels))
  )
  incremental_outcome = np.random.lognormal(10, 1, size=shape)

  xarray = xr.Dataset(
      data_vars={
          c.SPEND: (
              [c.SPEND_MULTIPLIER, c.CHANNEL],
              spend,
          ),
          c.INCREMENTAL_OUTCOME: (
              [c.SPEND_MULTIPLIER, c.CHANNEL, c.METRIC],
              incremental_outcome,
          ),
      },
      coords={
          c.CHANNEL: channels,
          c.METRIC: metric,
          c.SPEND_MULTIPLIER: spend_multiplier,
      },
      attrs={c.CONFIDENCE_LEVEL: c.DEFAULT_CONFIDENCE_LEVEL},
  )
  return xarray


def generate_predictive_accuracy_data(holdout_id: bool = False) -> xr.Dataset:
  """Helper method to generate simulated predictive accuracy data."""

  np.random.seed(0)

  xr_dims = [c.METRIC, c.GEO_GRANULARITY]
  xr_coords = {
      c.METRIC: [c.R_SQUARED, c.MAPE, c.WMAPE],
      c.GEO_GRANULARITY: [c.GEO, c.NATIONAL],
  }
  rsquared_arr = [np.random.uniform(0.0, 1.0) for _ in range(2)]
  mape_arr = [np.random.uniform(0.0, 1.0) for _ in range(2)]
  wmape_arr = [np.random.uniform(0.0, 1.0) for _ in range(2)]

  if not holdout_id:
    stacked_metric_values = np.stack([rsquared_arr, mape_arr, wmape_arr])
    xr_data = {c.VALUE: (xr_dims, stacked_metric_values)}
  else:
    geo_train = [np.random.uniform(0.0, 1.0) for _ in range(3)]
    national_train = [np.random.uniform(0.0, 1.0) for _ in range(3)]
    geo_test = [np.random.uniform(0.0, 1.0) for _ in range(3)]
    national_test = [np.random.uniform(0.0, 1.0) for _ in range(3)]
    geo_all_data = [np.random.uniform(0.0, 1.0) for _ in range(3)]
    national_all_data = [np.random.uniform(0.0, 1.0) for _ in range(3)]

    stacked_train = np.stack([geo_train, national_train], axis=-1)
    stacked_test = np.stack([geo_test, national_test], axis=-1)
    stacked_all_data = np.stack([geo_all_data, national_all_data], axis=-1)
    stacked_total = np.stack(
        [stacked_train, stacked_test, stacked_all_data], axis=-1
    )

    xr_dims.append(c.EVALUATION_SET_VAR)
    xr_coords[c.EVALUATION_SET_VAR] = list(c.EVALUATION_SET)
    xr_data = {c.VALUE: (xr_dims, stacked_total)}

  return xr.Dataset(data_vars=xr_data, coords=xr_coords)


def generate_optimal_frequency_data(
    channel_prefix: str = c.RF_CHANNEL,
    num_channels: int = 5,
    use_roi: bool = True,
) -> xr.Dataset:
  """Helper method to generate simulated optimal frequency data."""
  frequency = list(np.arange(1, 7.05, 0.1))
  rf_channel = [f"{channel_prefix}_{i}" for i in range(num_channels)]
  metric = [c.MEAN, c.MEDIAN, c.CI_LO, c.CI_HI]

  np.random.seed(0)
  metric_by_frequency = np.random.lognormal(
      1, 1, size=(len(frequency), len(rf_channel), len(metric))
  )
  optimal_frequency = np.random.lognormal(1, 1, size=(len(rf_channel)))
  optimized_effectiveness = np.random.lognormal(
      1, 1, size=(len(rf_channel), len(metric))
  )
  optimized_incremental_outcome = np.random.lognormal(
      1, 1, size=(len(rf_channel), len(metric))
  )
  optimized_pct_of_contribution = np.random.lognormal(
      1, 1, size=(len(rf_channel), len(metric))
  )
  optimized_roi = np.random.lognormal(1, 1, size=(len(rf_channel), len(metric)))
  optimized_mroi_by_reach = np.random.lognormal(
      1, 1, size=(len(rf_channel), len(metric))
  )
  optimized_mroi_by_frequency = np.random.lognormal(
      1, 1, size=(len(rf_channel), len(metric))
  )
  optimized_cpik = np.random.lognormal(
      1, 1, size=(len(rf_channel), len(metric))
  )

  metric_name = c.ROI if use_roi else c.CPIK
  data_vars = {
      metric_name: (
          [c.FREQUENCY, c.RF_CHANNEL, c.METRIC],
          metric_by_frequency,
      ),
      c.OPTIMAL_FREQUENCY: (
          [c.RF_CHANNEL],
          optimal_frequency,
      ),
      c.OPTIMIZED_EFFECTIVENESS: (
          [c.RF_CHANNEL, c.METRIC],
          optimized_effectiveness,
      ),
      c.OPTIMIZED_INCREMENTAL_OUTCOME: (
          [c.RF_CHANNEL, c.METRIC],
          optimized_incremental_outcome,
      ),
      c.OPTIMIZED_PCT_OF_CONTRIBUTION: (
          [c.RF_CHANNEL, c.METRIC],
          optimized_pct_of_contribution,
      ),
  }

  if use_roi:
    data_vars[c.OPTIMIZED_ROI] = (
        (c.RF_CHANNEL, c.METRIC),
        optimized_roi,
    )
    data_vars[c.OPTIMIZED_MROI_BY_REACH] = (
        (c.RF_CHANNEL, c.METRIC),
        optimized_mroi_by_reach,
    )
    data_vars[c.OPTIMIZED_MROI_BY_FREQUENCY] = (
        (c.RF_CHANNEL, c.METRIC),
        optimized_mroi_by_frequency,
    )
  else:
    data_vars[c.OPTIMIZED_CPIK] = (
        (c.RF_CHANNEL, c.METRIC),
        optimized_cpik,
    )

  return xr.Dataset(
      data_vars=data_vars,
      coords={
          c.FREQUENCY: frequency,
          c.RF_CHANNEL: rf_channel,
          c.METRIC: metric,
      },
  )


def generate_hill_curves_dataframe() -> pd.DataFrame:
  """Helper method to generate simulated hill curve data."""
  channel_names = (
      [f"ch_{i}" for i in range(3)]
      + [f"rf_ch_{i}" for i in range(2)]
      + [f"organic_ch_{i}" for i in range(2)]
      + [f"organic_rf_ch_{i}" for i in range(1)]
  )
  channel_array = []
  channel_type_array = []
  for channel_name in channel_names:
    for _ in range(100):
      channel_array.append(channel_name)
      if channel_name.startswith("ch_"):
        channel_type_array.append(c.MEDIA)
      elif channel_name.startswith("rf_ch_"):
        channel_type_array.append(c.RF)
      elif channel_name.startswith("organic_ch_"):
        channel_type_array.append(c.ORGANIC_MEDIA)
      elif channel_name.startswith("organic_rf_ch_"):
        channel_type_array.append(c.ORGANIC_RF)

  np.random.seed(0)
  media_units_array = [
      np.random.uniform(0, 1000) for _ in range(len(channel_array))
  ]
  distribution_array = [
      c.POSTERIOR if i % 2 == 0 else c.PRIOR for i in range(len(channel_array))
  ]
  ci_hi_array = [np.random.rand() for _ in range(len(channel_array))]
  ci_lo_array = [np.random.rand() for _ in range(len(channel_array))]
  mean_array = [np.random.rand() for _ in range(len(channel_array))]

  one_channel_impressions_hist = [
      np.random.rand() if i == 0 else None for i in range(100)
  ]
  one_channel_start_interval_hist = [
      np.random.uniform(0, 1000) if i == 0 else None for i in range(100)
  ]
  one_channel_end_interval_hist = [
      np.random.uniform(0, 1000) if i == 0 else None for i in range(100)
  ]

  scaled_count, start_interval, end_interval = [], [], []

  for _ in range(len(channel_names)):
    scaled_count.extend(one_channel_impressions_hist)
    start_interval.extend(one_channel_start_interval_hist)
    end_interval.extend(one_channel_end_interval_hist)

  data_hill = {
      c.CHANNEL: channel_array,
      c.MEDIA_UNITS: media_units_array,
      c.DISTRIBUTION: distribution_array,
      c.CI_HI: ci_hi_array,
      c.CI_LO: ci_lo_array,
      c.MEAN: mean_array,
      c.CHANNEL_TYPE: channel_type_array,
      c.SCALED_COUNT_HISTOGRAM: scaled_count,
      c.START_INTERVAL_HISTOGRAM: start_interval,
      c.END_INTERVAL_HISTOGRAM: end_interval,
  }

  return pd.DataFrame(data_hill).reset_index(drop=True)


def generate_adstock_decay_data() -> pd.DataFrame:
  """Helper method to generate simulated adstock decay data."""
  channel_names = [f"ch_{i}" for i in range(3)] + [
      f"rf_ch_{i}" for i in range(2)
  ]

  channel_array, time_units_array = [], []
  np.random.seed(0)

  for channel in range(len(channel_names)):
    for _ in range(100):
      channel_array.append(channel)
    time_units_array.extend(np.linspace(0, 20, 100))

  distribution_array = [
      c.PRIOR if i % 2 == 0 else c.POSTERIOR for i in range(len(channel_array))
  ]
  mean_array = [np.random.rand() for _ in range(len(channel_array))]
  ci_lo_array = [np.random.rand() for _ in range(len(channel_array))]
  ci_hi_array = [np.random.rand() for _ in range(len(channel_array))]

  data_hill = {
      c.TIME_UNITS: time_units_array,
      c.CHANNEL: channel_array,
      c.DISTRIBUTION: distribution_array,
      c.MEAN: mean_array,
      c.CI_LO: ci_lo_array,
      c.CI_HI: ci_hi_array,
  }

  return pd.DataFrame(data_hill).reset_index(drop=True)


def get_child_element(
    root: et.ElementTree.Element,
    path: str,
    attribs: Mapping[str, str] | None = None,
) -> et.ElementTree.Element:
  """Searches for a descendant element under `root` with the given path.

  Args:
    root: The top-level element to search from.
    path: Path fom the root to search.
    attribs: Optional attribute match to search for.

  Returns:
    ElementTree Element found from the path and attribute match.
  Raises:
    AssertionError if not found.
  """
  for div in root.findall(path):
    if attribs:
      if not (attribs.items() <= div.attrib.items()):
        continue
    return div
  raise AssertionError(
      f"Cannot find child element {path} under {root} "
      + (f"with {attribs}" if attribs else "")
  )


def get_table_row_values(
    tr: et.ElementTree.Element, row_element="td"
) -> Sequence[str]:
  row_values = []
  for row in tr.findall(row_element):
    row_values.append(row.text or "")
  return row_values


def generate_selected_times(start: str, periods: int) -> Sequence[str]:
  return pd.date_range(start, freq="W-SUN", periods=periods).format(
      formatter=lambda x: x.strftime("%Y-%m-%d")
  )
